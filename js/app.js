!function(e){function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}var t={};return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=17)}([function(e,n,t){"use strict";function r(e,n){document.dispatchEvent(new CustomEvent(e,{detail:n}))}function a(e,n){document.addEventListener(e,function(e){return n(e.detail)})}n.Notify=r,n.Listen=a,n.CHAR_SPACING="charSpacing",n.LETTER="letter",n.LETTERS_ENABLED="lettersEnabled",n.NOW_PLAYING="nowPlaying",n.NUMBERS_ENABLED="numbersEnabled",n.OUTPUT="output",n.PATTERN_COMPLETE="patternComplete",n.PITCH="pitch",n.START="start",n.STORY="book",n.STOP="stop",n.TONE_OFF="toneOff",n.TONE_ON="toneOn",n.VOICE_DONE="voiceDone",n.VOICE_LOADED="voiceLoaded",n.VOICE_ENABLED="voiceEnabled",n.VOLUME="volume",n.SYMBOLS_ENABLED="symbolsEnabled",n.TEXT_BUFFER="textBuffer",n.WPM="wpm"},function(e,n,t){"use strict";n.Audio=new(AudioContext||window.webkitAudioContext),n.MasterGain=n.Audio.createGain(),n.MasterGain.gain.value=.5,n.MasterGain.connect(n.Audio.destination)},function(e,n,t){"use strict";var r=t(0);r.Listen(r.NOW_PLAYING,function(e){return n.NowPlaying=e}),r.Listen(r.WPM,function(e){return n.UnitTime=1.2/e*1e3}),r.Listen(r.CHAR_SPACING,function(e){return n.CharSpacing=e})},function(e,n,t){"use strict";function r(){N.gain.setTargetAtTime(d,f.Audio.currentTime+p,E),l.Notify(l.TONE_ON,null)}function a(){N.gain.setTargetAtTime(0,f.Audio.currentTime+p,E),l.Notify(l.TONE_OFF,null)}function i(e,n){return o(this,void 0,void 0,function(){var t;return c(this,function(u){switch(u.label){case 0:return m.NowPlaying?(t="."===e.pattern.charAt(n++)?1:3,r(),[4,s.Sleep(m.UnitTime*t)]):[3,5];case 1:return u.sent(),a(),n>=e.pattern.length?(l.Notify(l.PATTERN_COMPLETE,e),[3,5]):[3,2];case 2:return[4,s.Sleep(m.UnitTime)];case 3:return u.sent(),[4,i(e,n)];case 4:u.sent(),u.label=5;case 5:return[2]}})})}function u(e){return o(this,void 0,void 0,function(){return c(this,function(n){switch(n.label){case 0:return null!=e?[3,1]:(console.log("char was null!"),l.Notify(l.PATTERN_COMPLETE,null),[3,3]);case 1:return l.Notify(l.LETTER,e.pattern),[4,i(e,0)];case 2:n.sent(),n.label=3;case 3:return[2]}})})}var o=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(a,i){function u(e){try{c(r.next(e))}catch(e){i(e)}}function o(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?a(e.value):new t(function(n){n(e.value)}).then(u,o)}c((r=r.apply(e,n)).next())})},c=this&&this.__generator||function(e,n){function t(e){return function(n){return r([e,n])}}function r(t){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,i&&(u=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(u=u.call(i,t[1])).done)return u;switch(i=0,u&&(t=[0,u.value]),t[0]){case 0:case 1:u=t;break;case 4:return o.label++,{value:t[1],done:!1};case 5:o.label++,i=t[1],t=[0];continue;case 7:t=o.ops.pop(),o.trys.pop();continue;default:if(u=o.trys,!(u=u.length>0&&u[u.length-1])&&(6===t[0]||2===t[0])){o=0;continue}if(3===t[0]&&(!u||t[1]>u[0]&&t[1]<u[3])){o.label=t[1];break}if(6===t[0]&&o.label<u[1]){o.label=u[1],u=t;break}if(u&&o.label<u[2]){o.label=u[2],o.ops.push(t);break}u[2]&&o.ops.pop(),o.trys.pop();continue}t=n.call(e,o)}catch(e){t=[6,e],i=0}finally{a=u=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}var a,i,u,o={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return{next:t(0),throw:t(1),return:t(2)}},l=t(0),s=t(6),f=t(1),m=t(2),p=navigator.userAgent.indexOf("irefox")!==-1?.05:1e-4,d=.9,E=.005,h=f.Audio.createOscillator(),N=f.Audio.createGain();N.gain.setValueAtTime(0,f.Audio.currentTime),h.connect(N),N.connect(f.MasterGain),h.start(0),n.PlayPattern=u,l.Listen(l.PITCH,function(e){return h.frequency.value=e})},function(e,n,t){"use strict";function r(e,n){return u(this,void 0,void 0,function(){var t;return o(this,function(r){switch(r.label){case 0:return N=n,h.indexOf(e.name)>-1?(c.Notify(c.VOICE_LOADED,e),[2]):[4,f.Load("/audio/"+e.fileName,"arraybuffer")];case 1:return t=r.sent(),l.Audio.decodeAudioData(t,function(n){p[e.name]=n;var t=E.indexOf(e.name);t>-1&&E.splice(t,1),h.indexOf(e.name)<0&&h.push(e.name),c.Notify(c.VOICE_LOADED,e)},function(e){return console.log("Error loading audio source: ",e)}),[2]}})})}function a(e){d&&h.indexOf(e.name)<0&&E.indexOf(e.name)<0&&(E.push(e.name),r(e,!1))}function i(e){return u(this,void 0,void 0,function(){var n,t;return o(this,function(a){switch(a.label){case 0:return s.NowPlaying?d?E.indexOf(e.name)>-1?(N=!0,[3,4]):[3,1]:(document.dispatchEvent(new Event(c.VOICE_DONE)),[2]):[2];case 1:return h.indexOf(e.name)<0?[4,r(e,!0)]:[3,3];case 2:return a.sent(),[3,4];case 3:n=p[e.name],console.log("playing"),t=l.Audio.createBufferSource(),t.addEventListener("ended",function(){return document.dispatchEvent(new Event(c.VOICE_DONE))}),t.buffer=n,t.connect(m),t.start(0),a.label=4;case 4:return[2]}})})}var u=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(a,i){function u(e){try{c(r.next(e))}catch(e){i(e)}}function o(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?a(e.value):new t(function(n){n(e.value)}).then(u,o)}c((r=r.apply(e,n)).next())})},o=this&&this.__generator||function(e,n){function t(e){return function(n){return r([e,n])}}function r(t){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,i&&(u=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(u=u.call(i,t[1])).done)return u;switch(i=0,u&&(t=[0,u.value]),t[0]){case 0:case 1:u=t;break;case 4:return o.label++,{value:t[1],done:!1};case 5:o.label++,i=t[1],t=[0];continue;case 7:t=o.ops.pop(),o.trys.pop();continue;default:if(u=o.trys,!(u=u.length>0&&u[u.length-1])&&(6===t[0]||2===t[0])){o=0;continue}if(3===t[0]&&(!u||t[1]>u[0]&&t[1]<u[3])){o.label=t[1];break}if(6===t[0]&&o.label<u[1]){o.label=u[1],u=t;break}if(u&&o.label<u[2]){o.label=u[2],o.ops.push(t);break}u[2]&&o.ops.pop(),o.trys.pop();continue}t=n.call(e,o)}catch(e){t=[6,e],i=0}finally{a=u=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}var a,i,u,o={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return{next:t(0),throw:t(1),return:t(2)}},c=t(0),l=t(1),s=t(2),f=t(7),m=l.Audio.createGain();m.gain.value=.85,m.connect(l.MasterGain);var p={},d=!0,E=[],h=[],N=!1;n.PreloadVoice=a,n.PlayVoice=i,c.Listen(c.VOICE_ENABLED,function(e){return d=e}),c.Listen(c.VOICE_LOADED,function(e){N&&i(e),N=!1})},function(e,n,t){"use strict";function r(e,n){return(n||document).querySelector(e)}function a(e,n){return(n||document).querySelectorAll(e)}function i(e){return document.getElementById(e)}n.Query=r,n.QueryAll=a,n.QueryId=i},function(e,n,t){"use strict";function r(e){return new Promise(function(n){return setTimeout(n,e)})}n.Sleep=r},function(e,n,t){"use strict";function r(e,n){return new Promise(function(t,r){var a=new XMLHttpRequest;a.responseType=n,a.open("GET",e),a.onload=function(){200===a.status?t(a.response):r(Error("There was a problem downloading the data: "+a))},a.onerror=function(){return r(Error("There was a problem downloading the data: "+a))},a.send()})}n.Load=r},function(e,n){},function(e,n,t){e.exports=t.p+"favicon.ico"},function(e,n,t){e.exports=t.p+"index.html"},function(e,n,t){e.exports=t.p+"robots.txt"},function(e,n,t){"use strict";function r(){y?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen&&document.mozCancelFullScreen():document.fullscreenEnabled?v.requestFullscreen():document.webkitFullscreenEnabled?v.webkitRequestFullscreen():document.mozFullScreenEnabled&&v.mozRequestFullScreen()}function a(){y=!y,L=Date.now()}function i(){L=Date.now()}function u(){Date.now()-L>T?(l(),y&&o()):(s(),c())}function o(){O&&(v.style.cursor="none"),O=!1}function c(){O||(v.style.cursor="default"),O=!0}function l(){b&&E.classList.add("disabled"),b=!1}function s(){b||E.classList.remove("disabled"),b=!0}function f(){s(),document.addEventListener("mousemove",i),p=setInterval(u,200)}function m(){clearInterval(p),document.removeEventListener("mousemove",i),c(),l()}var p,d=t(5),E=d.Query(".btn-fullscreen"),h=d.Query(".btn-start"),N=d.Query(".btn-stop"),v=d.Query(".view.playing"),y=!1,L=Date.now(),T=2e3,b=!1,O=!1;h.addEventListener("click",f),N.addEventListener("click",m),document.fullscreenEnabled?document.addEventListener("fullscreenchange",a):document.webkitFullscreenEnabled?document.addEventListener("webkitfullscreenchange",a):document.mozFullScreenEnabled&&document.addEventListener("mozfullscreenchange",a),E.addEventListener("click",r)},function(e,n,t){"use strict";function r(){return c(this,void 0,void 0,function(){var e,n;return l(this,function(t){switch(t.label){case 0:return h.NowPlaying?(e=E.Next(),e[1]?e[0]===e[1].name?[3,2]:(s.Notify(s.OUTPUT,e[0].substr(0,e[0].length-1)),[4,f.Sleep(h.UnitTime*h.CharSpacing*(7/3))]):[3,4]):[3,7];case 1:t.sent(),t.label=2;case 2:return n=e[1],d.PreloadVoice(n),[4,p.PlayPattern(n)];case 3:return t.sent(),[3,5];case 4:s.Notify(s.PATTERN_COMPLETE,null),t.label=5;case 5:return[4,f.Sleep(h.UnitTime*h.CharSpacing)];case 6:t.sent(),t.label=7;case 7:return[2]}})})}function a(e){m.MasterGain.gain.setTargetAtTime(e,m.Audio.currentTime,.01)}function i(){return c(this,void 0,void 0,function(){return l(this,function(e){switch(e.label){case 0:return h.NowPlaying?[3,2]:(s.Notify(s.NOW_PLAYING,!0),[4,r()]);case 1:e.sent(),e.label=2;case 2:return[2]}})})}function u(){s.Notify(s.NOW_PLAYING,!1)}function o(e){return c(this,void 0,void 0,function(){return l(this,function(n){switch(n.label){case 0:return h.NowPlaying?null!=e?[3,2]:[4,f.Sleep(h.UnitTime*h.CharSpacing)]:[3,5];case 1:return n.sent(),r(),[3,5];case 2:return s.Notify(s.LETTER,e.name),[4,f.Sleep(h.UnitTime*h.CharSpacing)];case 3:return n.sent(),[4,d.PlayVoice(e)];case 4:n.sent(),n.label=5;case 5:return[2]}})})}var c=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(a,i){function u(e){try{c(r.next(e))}catch(e){i(e)}}function o(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?a(e.value):new t(function(n){n(e.value)}).then(u,o)}c((r=r.apply(e,n)).next())})},l=this&&this.__generator||function(e,n){function t(e){return function(n){return r([e,n])}}function r(t){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,i&&(u=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(u=u.call(i,t[1])).done)return u;switch(i=0,u&&(t=[0,u.value]),t[0]){case 0:case 1:u=t;break;case 4:return o.label++,{value:t[1],done:!1};case 5:o.label++,i=t[1],t=[0];continue;case 7:t=o.ops.pop(),o.trys.pop();continue;default:if(u=o.trys,!(u=u.length>0&&u[u.length-1])&&(6===t[0]||2===t[0])){o=0;continue}if(3===t[0]&&(!u||t[1]>u[0]&&t[1]<u[3])){o.label=t[1];break}if(6===t[0]&&o.label<u[1]){o.label=u[1],u=t;break}if(u&&o.label<u[2]){o.label=u[2],o.ops.push(t);break}u[2]&&o.ops.pop(),o.trys.pop();continue}t=n.call(e,o)}catch(e){t=[6,e],i=0}finally{a=u=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}var a,i,u,o={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return{next:t(0),throw:t(1),return:t(2)}},s=t(0),f=t(6),m=t(1),p=t(3),d=t(4),E=t(16),h=t(2);s.Listen(s.VOICE_DONE,r),s.Listen(s.STOP,u),s.Listen(s.START,i),s.Listen(s.PATTERN_COMPLETE,o),s.Listen(s.VOLUME,a)},function(e,n,t){"use strict";function r(e){for(var n=i.QueryAll(".view"),t=0;t<n.length;++t){var r=n[t];r.classList.contains("disabled")||r.classList.add("disabled")}var a=i.Query(e);a.classList.remove("disabled")}var a=t(0),i=t(5),u=i.Query(".btn-start"),o=i.Query(".btn-stop"),c=i.Query(".btn-paste"),l=i.Query(".btn-stories"),s=i.Query(".letter"),f=i.Query(".outputBuffer"),m=i.QueryAll(".story a"),p=i.Query(".volumeText"),d=i.Query(".charWPMText"),E=i.Query(".pitchText"),h=i.Query(".charSpacingText"),N=i.QueryId("volume"),v=i.QueryId("charWPM"),y=i.QueryId("pitch"),L=i.QueryId("charSpacing"),T=i.QueryId("voiceEnabled"),b=i.QueryId("pasteText"),O=i.QueryId("lettersEnabled"),w=i.QueryId("numbersEnabled"),A=i.QueryId("symbolsEnabled");N.addEventListener("input",function(){return a.Notify(a.VOLUME,parseFloat(N.value))}),v.addEventListener("input",function(){return a.Notify(a.WPM,parseInt(v.value))}),L.addEventListener("input",function(){return a.Notify(a.CHAR_SPACING,parseInt(L.value))}),y.addEventListener("input",function(){return a.Notify(a.PITCH,parseInt(y.value))}),b.addEventListener("input",function(){return a.Notify(a.TEXT_BUFFER,b.value)}),T.addEventListener("change",function(){return a.Notify(a.VOICE_ENABLED,T.checked)}),O.addEventListener("change",function(){return a.Notify(a.LETTERS_ENABLED,O.checked)}),w.addEventListener("change",function(){return a.Notify(a.NUMBERS_ENABLED,w.checked)}),A.addEventListener("change",function(){return a.Notify(a.SYMBOLS_ENABLED,A.checked)}),c.addEventListener("click",function(){return r(".paste")}),l.addEventListener("click",function(){return r(".stories")}),u.addEventListener("click",function(){return a.Notify(a.START,null)}),o.addEventListener("click",function(){return a.Notify(a.STOP,null)});for(var g=0;g<m.length;++g){var S=m[g];S.addEventListener("click",function(e){e.preventDefault();var n=e.target,t=n.href;a.Notify(a.STORY,t)})}a.Listen(a.START,function(){f.innerHTML="",r(".view.playing"),u.disabled=!0,o.disabled=!1}),a.Listen(a.STOP,function(){s.innerHTML="",u.disabled=!1,o.disabled=!0,r(".view.main")}),a.Listen(a.TEXT_BUFFER,function(e){return b.value=e}),a.Listen(a.VOLUME,function(e){return p.value=Math.floor(100*e).toString()}),a.Listen(a.WPM,function(e){return d.value=e.toString()}),a.Listen(a.CHAR_SPACING,function(e){return h.value=e.toString()}),a.Listen(a.PITCH,function(e){return E.value=e.toString()}),a.Listen(a.LETTER,function(e){return s.innerHTML=e}),a.Listen(a.OUTPUT,function(e){f.innerHTML+=e,f.scrollTop=f.scrollHeight}),a.Listen(a.PATTERN_COMPLETE,function(e){f.innerHTML+=null==e?" ":e.name,f.scrollTop=f.scrollHeight}),a.Listen(a.TONE_OFF,function(){return i.Query("body").classList.remove("toneOn")}),a.Listen(a.TONE_ON,function(){return i.Query("body").classList.add("toneOn")}),a.Notify(a.VOLUME,N.value),a.Notify(a.WPM,v.value),a.Notify(a.CHAR_SPACING,L.value),a.Notify(a.VOICE_ENABLED,T.checked),a.Notify(a.PITCH,y.value),a.Notify(a.LETTERS_ENABLED,O.checked),a.Notify(a.NUMBERS_ENABLED,w.checked),a.Notify(a.SYMBOLS_ENABLED,A.checked)},function(e,n,t){"use strict";function r(){var e=[];if(m&&(e=e.concat(l)),p&&(e=e.concat(s)),d&&(e=e.concat(f)),e.length>0){var n=e[Math.floor(Math.random()*e.length)];return u[n]||o[n]||c[n]}return null}function a(e){e=e.toUpperCase();var n=u[e];return n?n:(n=o[e])?n:(n=c[e],n?n:void 0)}var i=t(0),u={A:{name:"A",pattern:".-",fileName:"A.mp3"},B:{name:"B",pattern:"-...",fileName:"B.mp3"},C:{name:"C",pattern:"-.-.",fileName:"C.mp3"},D:{name:"D",pattern:"-..",fileName:"D.mp3"},E:{name:"E",pattern:".",fileName:"E.mp3"},F:{name:"F",pattern:"..-.",fileName:"F.mp3"},G:{name:"G",pattern:"--.",fileName:"G.mp3"},H:{name:"H",pattern:"....",fileName:"H.mp3"},I:{name:"I",pattern:"..",fileName:"I.mp3"},J:{name:"J",pattern:".---",fileName:"J.mp3"},K:{name:"K",pattern:"-.-",fileName:"K.mp3"},L:{name:"L",pattern:".-..",fileName:"L.mp3"},M:{name:"M",pattern:"--",fileName:"M.mp3"},N:{name:"N",pattern:"-.",fileName:"N.mp3"},O:{name:"O",pattern:"---",fileName:"O.mp3"},P:{name:"P",pattern:".--.",fileName:"P.mp3"},Q:{name:"Q",pattern:"--.-",fileName:"Q.mp3"},R:{name:"R",pattern:".-.",fileName:"R.mp3"},S:{name:"S",pattern:"...",fileName:"S.mp3"},T:{name:"T",pattern:"-",fileName:"T.mp3"},U:{name:"U",pattern:"..-",fileName:"U.mp3"},V:{name:"V",pattern:"...-",fileName:"V.mp3"},W:{name:"W",pattern:".--",fileName:"W.mp3"},X:{name:"X",pattern:"-..-",fileName:"X.mp3"},Y:{name:"Y",pattern:"-.--",fileName:"Y.mp3"},Z:{name:"Z",pattern:"--..",fileName:"Z.mp3"}},o={0:{name:"0",pattern:"-----",fileName:"0.mp3"},1:{name:"1",pattern:".----",fileName:"1.mp3"},2:{name:"2",pattern:"..---",fileName:"2.mp3"},3:{name:"3",pattern:"...--",fileName:"3.mp3"},4:{name:"4",pattern:"....-",fileName:"4.mp3"},5:{name:"5",pattern:".....",fileName:"5.mp3"},6:{name:"6",pattern:"-....",fileName:"6.mp3"},7:{name:"7",pattern:"--...",fileName:"7.mp3"},8:{name:"8",pattern:"---..",fileName:"8.mp3"},9:{name:"9",pattern:"----.",fileName:"9.mp3"}},c={".":{name:".",pattern:".-.-.-",fileName:"PERIOD.mp3"},"?":{name:"?",pattern:"..--..",fileName:"QUESTION.mp3"},"!":{name:"!",pattern:"-.-.--",fileName:"EXCLAMATION.mp3"},",":{name:",",pattern:"--..--",fileName:"COMMA.mp3"},":":{name:":",pattern:"---...",fileName:"COLON.mp3"},";":{name:";",pattern:"-.-.-.",fileName:"SEMICOLON.mp3"},"'":{name:"'",pattern:".----.",fileName:"APOSTROPHE.mp3"},"-":{name:"-",pattern:"-....-",fileName:"DASH.mp3"},"/":{name:"/",pattern:"-..-.",fileName:"SLASH.mp3"},"(":{name:"(",pattern:"-.--.",fileName:"OPEN_BRACKET.mp3"},")":{name:")",pattern:"-.--.-",fileName:"CLOSE_BRACKET.mp3"},"@":{name:"@",pattern:".--.-.",fileName:"AT.mp3"},"=":{name:"=",pattern:"-...-",fileName:"EQUALS.mp3"},"+":{name:"+",pattern:".-.-.",fileName:"PLUS.mp3"},'"':{name:'"',pattern:".-..-.",fileName:"QUOTE.mp3"}},l=Object.keys(u),s=Object.keys(o),f=Object.keys(c),m=!0,p=!1,d=!1;n.RandomCharacter=r,n.GetCharacter=a,i.Listen(i.LETTERS_ENABLED,function(e){return m=e}),i.Listen(i.NUMBERS_ENABLED,function(e){return p=e}),i.Listen(i.SYMBOLS_ENABLED,function(e){return d=e})},function(e,n,t){"use strict";function r(e){f=e.toUpperCase()+"\n",m=f.length>0?0:-1}function a(e){return u(this,void 0,void 0,function(){var n;return o(this,function(t){switch(t.label){case 0:return[4,s.Load(e,"text")];case 1:return n=t.sent(),c.Notify(c.TEXT_BUFFER,n),c.Notify(c.START,null),[2]}})})}function i(){if(f.length>0){var e=m,n="";do{n+=f[m];var t=l.GetCharacter(f[m]);if(++m,m===f.length&&(m=0),t)return[n,t]}while(m!==e);return["",null]}var r=l.RandomCharacter();return[r.name,r]}var u=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(a,i){function u(e){try{c(r.next(e))}catch(e){i(e)}}function o(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?a(e.value):new t(function(n){n(e.value)}).then(u,o)}c((r=r.apply(e,n)).next())})},o=this&&this.__generator||function(e,n){function t(e){return function(n){return r([e,n])}}function r(t){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,i&&(u=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(u=u.call(i,t[1])).done)return u;switch(i=0,u&&(t=[0,u.value]),t[0]){case 0:case 1:u=t;break;case 4:return o.label++,{value:t[1],done:!1};case 5:o.label++,i=t[1],t=[0];continue;case 7:t=o.ops.pop(),o.trys.pop();continue;default:if(u=o.trys,!(u=u.length>0&&u[u.length-1])&&(6===t[0]||2===t[0])){o=0;continue}if(3===t[0]&&(!u||t[1]>u[0]&&t[1]<u[3])){o.label=t[1];break}if(6===t[0]&&o.label<u[1]){o.label=u[1],u=t;break}if(u&&o.label<u[2]){o.label=u[2],o.ops.push(t);break}u[2]&&o.ops.pop(),o.trys.pop();continue}t=n.call(e,o)}catch(e){t=[6,e],i=0}finally{a=u=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}var a,i,u,o={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return{next:t(0),throw:t(1),return:t(2)}},c=t(0),l=t(15),s=t(7),f="",m=-1;n.Next=i,c.Listen(c.TEXT_BUFFER,r),c.Listen(c.STORY,a)},function(e,n,t){"use strict";t(10),t(9),t(11),t(8);t(1),t(4),t(3),t(13),t(12),t(14)}]);