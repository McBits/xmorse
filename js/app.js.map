{"version":3,"sources":["app.js"],"names":["Notify","name","value","document","dispatchEvent","CustomEvent","detail","Listen","handler","addEventListener","evt","Query","selector","element","querySelector","QueryAll","querySelectorAll","QueryId","id","getElementById","AudioCtx","AudioContext","window","MasterGain","createGain","gain","connect","destination","LETTER","NOW_PLAYING","OUTPUT","OSC_OFF","OSC_ON","PATTERN_START","PATTERN_STOP","PAUSE","START","STORY","STOP","SET_SPACING","SET_FLASHING_ENABLED","SET_LETTERS","SET_NUMBERS","SET_PITCH","SET_SYMBOLS","SET_TEXT_BUFFER","SET_VOICE","SET_VOLUME","SET_WPM","UI_SPACING","UI_FLASHING","UI_LETTERS","UI_NUMBERS","UI_PITCH","UI_SYMBOLS","UI_TEXT_BUFFER","UI_VOICE","UI_VOLUME","UI_WPM","VIEW_HOME","VIEW_SETTINGS","VIEW_PLAYING","VIEW_STORIES","VIEW_TEXT","VOICE_DONE","WATCH","FullScreen","exitFullScreen","exitFullscreen","enterFullScreen","fullscreenEnabled","playingView","requestFullscreen","toggleFullScreen","isFullScreen","fullScreenChanged","fullScreenButton","textContent","lastActivity","Date","now","markTime","hideOrReveal","hideControlsMS","hideControls","hideCursor","showControls","showCursor","cursorVisible","style","cursor","controlsVisible","classList","add","controls","menu","sidebar","remove","start","hideControlsInterval","setInterval","stop","clearInterval","removeEventListener","body","parentElement","Morse","RandomCharacter","chars","lettersEnabled","concat","letters","numbersEnabled","numbers","symbolsEnabled","symbols","length","char","Math","floor","random","letterPatterns","numberPatterns","symbolPatterns","GetCharacter","toUpperCase","found","fileName","symbolNames","A","pattern","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9",".","?","!",",",":",";","'","-","/","(",")","@","=","+","\"","Object","keys","Timing","NowPlaying","UnitTime","CharSpacing","TonePlayer","on","oscillatorGain","setTargetAtTime","oscillatorVolume","currentTime","firefoxAntiClickDelay","ramp","off","PlayPattern","pos","i","toneDuration","setTimeout","navigator","userAgent","indexOf","oscillator","createOscillator","setValueAtTime","frequency","Xhr","Load","url","responseType","success","request","XMLHttpRequest","onload","status","response","console","log","onerror","open","send","VoicePlayer","voiceLoaded","play","playWhenDone","PlayVoice","decodeResponse","callback","decodeAudioData","buffer","audioBuffers","loading","loaded","err","loadVoice","PreloadVoice","voiceEnabled","audioSource","createBufferSource","voiceGain","TextLoader","resetPosition","textBufferIndex","textBuffer","updateTextBuffer","text","loadBook","href","Next","startingIndex","morseChar","Player","playNextPattern","nextCharacter_1","sleepTime","substr","currentCharacter","updateVolume","startPlaying","stopPlaying","patternComplete","Routing","processHash","hash","location","routes","history","replaceState","title","pathname","","#playing","#settings","#stories","#text","LocalStorage","localStorage","setItem","toString","UI","startBtns","startBtn","pauseBtn","stopBtn","letterElement","outputBuffer","storyLinks","patternEl","playState","storyLink","preventDefault","anchor","target","disabled","innerHTML","scrollTop","scrollHeight","make","className","el","createElement","appendChild","Settings","userSet","flashingEnabled","checked","Adjust","replace","resetSettingsButton","volumeText","charWPMText","pitchText","charSpacingText","volume","charWPM","pitch","charSpacing","pasteTextBox","defaults","wpm","parseFloat","parseInt","getItem","voiceEnabledStorage","flashingEnabledStorage","lettersEnabledStorage","numbersEnabledStorage","symbolsEnabledStorage","Views","view","menuItem","views","view_1","contains","viewToShow","control"],"mappings":"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","file":"app.js","sourcesContent":["var AudioCtx = new (AudioContext || window[\"webkitAudioContext\"])();\nvar MasterGain = AudioCtx.createGain();\nMasterGain.gain.value = 0.5;\nMasterGain.connect(AudioCtx.destination);\nfunction Notify(name, value) {\n    document.dispatchEvent(new CustomEvent(name, { detail: value }));\n}\nfunction Listen(name, handler) {\n    document.addEventListener(name, function (evt) { return handler(evt.detail); });\n}\nvar LETTER = \"letter\";\nvar NOW_PLAYING = \"nowPlaying\";\nvar OUTPUT = \"output\";\nvar OSC_OFF = \"toneOff\";\nvar OSC_ON = \"toneOn\";\nvar PATTERN_START = \"patternStart\";\nvar PATTERN_STOP = \"patternStop\";\nvar PAUSE = \"pause\";\nvar START = \"start\";\nvar STORY = \"book\";\nvar STOP = \"stop\";\nvar SET_SPACING = \"set_spacing\";\nvar SET_FLASHING_ENABLED = \"set_flashing\";\nvar SET_LETTERS = \"set_letters\";\nvar SET_NUMBERS = \"set_numbers\";\nvar SET_PITCH = \"set_pitch\";\nvar SET_SYMBOLS = \"set_symbols\";\nvar SET_TEXT_BUFFER = \"set_textBuffer\";\nvar SET_VOICE = \"set_voice\";\nvar SET_VOLUME = \"set_volume\";\nvar SET_WPM = \"set_wpm\";\nvar UI_SPACING = \"ui_spacing\";\nvar UI_FLASHING = \"ui_flashing\";\nvar UI_LETTERS = \"ui_letters\";\nvar UI_NUMBERS = \"ui_numbers\";\nvar UI_PITCH = \"ui_pitch\";\nvar UI_SYMBOLS = \"ui_symbols\";\nvar UI_TEXT_BUFFER = \"ui_textBuffer\";\nvar UI_VOICE = \"ui_voice\";\nvar UI_VOLUME = \"ui_volume\";\nvar UI_WPM = \"ui_wpm\";\nvar VIEW_HOME = \"view_home\";\nvar VIEW_SETTINGS = \"view_settings\";\nvar VIEW_PLAYING = \"view_player\";\nvar VIEW_STORIES = \"view_stories\";\nvar VIEW_TEXT = \"view_text\";\nvar VOICE_DONE = \"voiceDone\";\nvar WATCH = \"watch\";\nfunction Query(selector, element) {\n    return (element || document).querySelector(selector);\n}\nfunction QueryAll(selector, element) {\n    return (element || document).querySelectorAll(selector);\n}\nfunction QueryId(id) {\n    return document.getElementById(id);\n}\n/// <reference path=\"query.ts\"/>\nvar FullScreen;\n(function (FullScreen) {\n    var fullScreenButton = Query(\".btn-fullscreen\");\n    var startButton = Query(\".btn-start\");\n    var stopButton = Query(\".btn-stop\");\n    var playingView = document.body.parentElement;\n    var controls = Query(\".controls\");\n    var menu = Query(\".menu\");\n    var sidebar = Query(\".sidebar\");\n    var isFullScreen = false;\n    var hideControlsInterval;\n    var lastActivity = Date.now();\n    var hideControlsMS = 2000;\n    var controlsVisible = false;\n    var cursorVisible = false;\n    function exitFullScreen() {\n        if (document.exitFullscreen)\n            document.exitFullscreen();\n        else if (document[\"webkitExitFullscreen\"])\n            document[\"webkitExitFullscreen\"]();\n        else if (document[\"mozCancelFullScreen\"])\n            document[\"mozCancelFullScreen\"]();\n    }\n    function enterFullScreen() {\n        if (document.fullscreenEnabled)\n            playingView.requestFullscreen();\n        else if (document[\"webkitFullscreenEnabled\"])\n            playingView[\"webkitRequestFullscreen\"]();\n        else if (document[\"mozFullScreenEnabled\"])\n            playingView[\"mozRequestFullScreen\"]();\n    }\n    function toggleFullScreen() {\n        if (isFullScreen)\n            exitFullScreen();\n        else\n            enterFullScreen();\n    }\n    function fullScreenChanged() {\n        isFullScreen = !isFullScreen;\n        fullScreenButton.textContent = isFullScreen ? \"Exit full screen\" : \"Full screen\";\n        lastActivity = Date.now();\n    }\n    function markTime() {\n        lastActivity = Date.now();\n    }\n    function hideOrReveal() {\n        if (isFullScreen && Date.now() - lastActivity > hideControlsMS) {\n            hideControls();\n            hideCursor();\n            return;\n        }\n        else {\n            showControls();\n            showCursor();\n        }\n    }\n    function hideCursor() {\n        if (cursorVisible)\n            playingView.style.cursor = \"none\";\n        cursorVisible = false;\n    }\n    function showCursor() {\n        if (!cursorVisible)\n            playingView.style.cursor = \"default\";\n        cursorVisible = true;\n    }\n    function hideControls() {\n        if (controlsVisible) {\n            fullScreenButton.classList.add(\"disabled\");\n            controls.classList.add(\"disabled\");\n            menu.classList.add(\"disabled\");\n            sidebar.classList.add(\"disabled\");\n        }\n        controlsVisible = false;\n    }\n    function showControls() {\n        if (!controlsVisible) {\n            fullScreenButton.classList.remove(\"disabled\");\n            controls.classList.remove(\"disabled\");\n            menu.classList.remove(\"disabled\");\n            sidebar.classList.remove(\"disabled\");\n        }\n        controlsVisible = true;\n    }\n    function start() {\n        document.addEventListener(\"mousemove\", markTime);\n        hideControlsInterval = setInterval(hideOrReveal, 200);\n    }\n    function stop() {\n        clearInterval(hideControlsInterval);\n        document.removeEventListener(\"mousemove\", markTime);\n        showCursor();\n        showControls();\n        if (isFullScreen)\n            exitFullScreen();\n    }\n    Listen(START, start);\n    Listen(STOP, stop);\n    if (document.fullscreenEnabled)\n        document.addEventListener(\"fullscreenchange\", fullScreenChanged);\n    else if (document[\"webkitFullscreenEnabled\"])\n        document.addEventListener(\"webkitfullscreenchange\", fullScreenChanged);\n    else if (document[\"mozFullScreenEnabled\"])\n        document.addEventListener(\"mozfullscreenchange\", fullScreenChanged);\n    fullScreenButton.addEventListener(\"click\", toggleFullScreen);\n})(FullScreen || (FullScreen = {}));\n/// <reference path=\"events.ts\"/>\nvar Morse;\n(function (Morse) {\n    var letterPatterns = {\n        \"A\": { name: \"A\", pattern: \".-\" },\n        \"B\": { name: \"B\", pattern: \"-...\" },\n        \"C\": { name: \"C\", pattern: \"-.-.\" },\n        \"D\": { name: \"D\", pattern: \"-..\" },\n        \"E\": { name: \"E\", pattern: \".\" },\n        \"F\": { name: \"F\", pattern: \"..-.\" },\n        \"G\": { name: \"G\", pattern: \"--.\" },\n        \"H\": { name: \"H\", pattern: \"....\" },\n        \"I\": { name: \"I\", pattern: \"..\" },\n        \"J\": { name: \"J\", pattern: \".---\" },\n        \"K\": { name: \"K\", pattern: \"-.-\" },\n        \"L\": { name: \"L\", pattern: \".-..\" },\n        \"M\": { name: \"M\", pattern: \"--\" },\n        \"N\": { name: \"N\", pattern: \"-.\" },\n        \"O\": { name: \"O\", pattern: \"---\" },\n        \"P\": { name: \"P\", pattern: \".--.\" },\n        \"Q\": { name: \"Q\", pattern: \"--.-\" },\n        \"R\": { name: \"R\", pattern: \".-.\" },\n        \"S\": { name: \"S\", pattern: \"...\" },\n        \"T\": { name: \"T\", pattern: \"-\" },\n        \"U\": { name: \"U\", pattern: \"..-\" },\n        \"V\": { name: \"V\", pattern: \"...-\" },\n        \"W\": { name: \"W\", pattern: \".--\" },\n        \"X\": { name: \"X\", pattern: \"-..-\" },\n        \"Y\": { name: \"Y\", pattern: \"-.--\" },\n        \"Z\": { name: \"Z\", pattern: \"--..\" }\n    };\n    var numberPatterns = {\n        \"0\": { name: \"0\", pattern: \"-----\" },\n        \"1\": { name: \"1\", pattern: \".----\" },\n        \"2\": { name: \"2\", pattern: \"..---\" },\n        \"3\": { name: \"3\", pattern: \"...--\" },\n        \"4\": { name: \"4\", pattern: \"....-\" },\n        \"5\": { name: \"5\", pattern: \".....\" },\n        \"6\": { name: \"6\", pattern: \"-....\" },\n        \"7\": { name: \"7\", pattern: \"--...\" },\n        \"8\": { name: \"8\", pattern: \"---..\" },\n        \"9\": { name: \"9\", pattern: \"----.\" }\n    };\n    var symbolPatterns = {\n        \".\": { name: \".\", pattern: \".-.-.-\" },\n        \"?\": { name: \"?\", pattern: \"..--..\" },\n        \"!\": { name: \"!\", pattern: \"-.-.--\" },\n        \",\": { name: \",\", pattern: \"--..--\" },\n        \":\": { name: \":\", pattern: \"---...\" },\n        \";\": { name: \";\", pattern: \"-.-.-.\" },\n        \"'\": { name: \"'\", pattern: \".----.\" },\n        \"-\": { name: \"-\", pattern: \"-....-\" },\n        \"/\": { name: \"/\", pattern: \"-..-.\" },\n        \"(\": { name: \"(\", pattern: \"-.--.\" },\n        \")\": { name: \")\", pattern: \"-.--.-\" },\n        \"@\": { name: \"@\", pattern: \".--.-.\" },\n        \"=\": { name: \"=\", pattern: \"-...-\" },\n        \"+\": { name: \"+\", pattern: \".-.-.\" },\n        \"\\\"\": { name: \"\\\"\", pattern: \".-..-.\" }\n    };\n    var symbolNames = {\n        \".\": \"PERIOD\",\n        \"?\": \"QUESTION\",\n        \"!\": \"EXCLAMATION\",\n        \",\": \"COMMA\",\n        \":\": \"COLON\",\n        \";\": \"SEMICOLON\",\n        \"'\": \"APOSTROPHE\",\n        \"-\": \"DASH\",\n        \"/\": \"SLASH\",\n        \"(\": \"OPEN_BRACKET\",\n        \")\": \"CLOSE_BRACKET\",\n        \"@\": \"AT\",\n        \"=\": \"EQUALS\",\n        \"+\": \"PLUS\",\n        \"\\\"\": \"QUOTE\"\n    };\n    var letters = Object.keys(letterPatterns);\n    var numbers = Object.keys(numberPatterns);\n    var symbols = Object.keys(symbolPatterns);\n    var lettersEnabled = true;\n    var numbersEnabled = false;\n    var symbolsEnabled = false;\n    function RandomCharacter() {\n        var chars = [];\n        if (lettersEnabled)\n            chars = chars.concat(letters);\n        if (numbersEnabled)\n            chars = chars.concat(numbers);\n        if (symbolsEnabled)\n            chars = chars.concat(symbols);\n        if (chars.length > 0) {\n            var char = chars[Math.floor(Math.random() * chars.length)];\n            return letterPatterns[char] || numberPatterns[char] || symbolPatterns[char];\n        }\n        return null;\n    }\n    Morse.RandomCharacter = RandomCharacter;\n    function GetCharacter(char) {\n        char = char.toUpperCase();\n        var found = letterPatterns[char];\n        if (found)\n            return found;\n        found = numberPatterns[char];\n        if (found)\n            return found;\n        found = symbolPatterns[char];\n        if (found)\n            return found;\n        return undefined;\n    }\n    Morse.GetCharacter = GetCharacter;\n    function fileName(char) {\n        var fileName = symbolNames[char.name];\n        if (!fileName)\n            fileName = char.name;\n        fileName += \".mp3\";\n        return fileName;\n    }\n    Morse.fileName = fileName;\n    Listen(SET_LETTERS, function (value) { return lettersEnabled = value; });\n    Listen(SET_NUMBERS, function (value) { return numbersEnabled = value; });\n    Listen(SET_SYMBOLS, function (value) { return symbolsEnabled = value; });\n})(Morse || (Morse = {}));\n/// <reference path=\"events.ts\"/>\nvar Timing;\n(function (Timing) {\n    Listen(NOW_PLAYING, function (value) { return Timing.NowPlaying = value; });\n    Listen(SET_WPM, function (value) { return Timing.UnitTime = 1.2 / value * 1000; });\n    Listen(SET_SPACING, function (value) { return Timing.CharSpacing = value; });\n})(Timing || (Timing = {}));\n/// <reference path=\"events.ts\"/>\n/// <reference path=\"audiocontext.ts\"/>\n/// <reference path=\"morsetable.ts\"/>\n/// <reference path=\"timing.ts\"/>\nvar TonePlayer;\n(function (TonePlayer) {\n    var T = Timing;\n    var firefoxAntiClickDelay = navigator.userAgent.indexOf(\"irefox\") !== -1 ? 0.05 : 0;\n    var oscillatorVolume = 0.9;\n    var ramp = 0.004;\n    // Wire up audio parts.\n    // Oscillator frequency will be initialized by UI.\n    var oscillator = AudioCtx.createOscillator();\n    var oscillatorGain = AudioCtx.createGain();\n    oscillatorGain.gain.setValueAtTime(0, AudioCtx.currentTime);\n    oscillator.connect(oscillatorGain);\n    oscillatorGain.connect(MasterGain);\n    oscillator.start(0);\n    function on() {\n        oscillatorGain.gain.setTargetAtTime(oscillatorVolume, AudioCtx.currentTime + firefoxAntiClickDelay, ramp);\n        Notify(OSC_ON, null);\n    }\n    function off() {\n        oscillatorGain.gain.setTargetAtTime(0, AudioCtx.currentTime + firefoxAntiClickDelay, ramp);\n        Notify(OSC_OFF, null);\n    }\n    function PlayPattern(char) {\n        Notify(PATTERN_START, char.pattern);\n        Notify(LETTER, \"\");\n        var pos = 0;\n        for (var i = 0; i < char.pattern.length; ++i) {\n            var toneDuration = char.pattern[i] === \".\" ? 1 : 3;\n            setTimeout(on, pos);\n            pos += T.UnitTime * toneDuration;\n            setTimeout(off, pos);\n            pos += T.UnitTime;\n        }\n        setTimeout(function () { return Notify(PATTERN_STOP, char); }, pos - T.UnitTime);\n    }\n    TonePlayer.PlayPattern = PlayPattern;\n    Listen(SET_PITCH, function (value) { return oscillator.frequency.value = value; });\n})(TonePlayer || (TonePlayer = {}));\nvar Xhr;\n(function (Xhr) {\n    function Load(url, responseType, success) {\n        var request = new XMLHttpRequest();\n        request.responseType = responseType;\n        request.onload = function () {\n            if (request.status === 200)\n                success(request.response);\n            else\n                console.log(\"Sever request failed: \", request);\n        };\n        request.onerror = function () { console.log(\"Server request failed: \", request); };\n        request.open(\"GET\", url);\n        request.send();\n    }\n    Xhr.Load = Load;\n})(Xhr || (Xhr = {}));\n/// <reference path=\"morsetable.ts\"/>\n/// <reference path=\"events.ts\"/>\n/// <reference path=\"audiocontext.ts\"/>\n/// <reference path=\"timing.ts\"/>\n/// <reference path=\"xhr.ts\"/>\nvar VoicePlayer;\n(function (VoicePlayer) {\n    // For caching audio files as they're loaded\n    var audioBuffers = {};\n    // Wire up audio\n    var voiceGain = AudioCtx.createGain();\n    voiceGain.gain.value = 0.85;\n    voiceGain.connect(MasterGain);\n    var voiceEnabled = false;\n    var loading = {};\n    var loaded = {};\n    var playWhenDone = false;\n    function voiceLoaded(char) {\n        var play = playWhenDone;\n        playWhenDone = false;\n        if (play)\n            PlayVoice(char);\n    }\n    function decodeResponse(char, callback) {\n        return function (response) {\n            AudioCtx.decodeAudioData(response, function (buffer) {\n                audioBuffers[char.name] = buffer;\n                loading[char.name] = false;\n                loaded[char.name] = true;\n                callback(char);\n            }, function (err) { return console.log(\"Error loading audio source: \", err); });\n        };\n    }\n    function loadVoice(char) {\n        if (loaded[char.name])\n            voiceLoaded(char);\n        else {\n            loading[char.name] = true;\n            Xhr.Load(\"/snd/\" + Morse.fileName(char), \"arraybuffer\", decodeResponse(char, voiceLoaded));\n        }\n    }\n    function PreloadVoice(char) {\n        if (voiceEnabled && !loaded[char.name] && loading[char.name])\n            loadVoice(char);\n    }\n    VoicePlayer.PreloadVoice = PreloadVoice;\n    function PlayVoice(char) {\n        if (!Timing.NowPlaying)\n            return;\n        if (!voiceEnabled)\n            Notify(VOICE_DONE, char);\n        else if (loading[char.name])\n            playWhenDone = true;\n        else if (!loaded[char.name]) {\n            playWhenDone = true;\n            loadVoice(char);\n        }\n        else {\n            var buffer = audioBuffers[char.name];\n            var audioSource = AudioCtx.createBufferSource();\n            audioSource.addEventListener(\"ended\", function () { return Notify(VOICE_DONE, char); });\n            audioSource.buffer = buffer;\n            audioSource.connect(voiceGain);\n            audioSource.start(0);\n        }\n    }\n    VoicePlayer.PlayVoice = PlayVoice;\n    Listen(SET_VOICE, function (value) { return voiceEnabled = value; });\n})(VoicePlayer || (VoicePlayer = {}));\n/// <reference path=\"events.ts\"/>\n/// <reference path=\"morsetable.ts\"/>\n/// <reference path=\"xhr.ts\"/>\nvar TextLoader;\n(function (TextLoader) {\n    var textBuffer = \"\";\n    var textBufferIndex = -1;\n    function resetPosition() {\n        textBufferIndex = textBuffer.length > 0 ? 0 : -1;\n    }\n    function updateTextBuffer(text) {\n        textBuffer = text.toUpperCase() + \"\\n\";\n        resetPosition();\n    }\n    function loadBook(href) {\n        var response = Xhr.Load(href, \"text\", function (response) {\n            Notify(SET_TEXT_BUFFER, response);\n            Notify(START, null);\n        });\n    }\n    function Next() {\n        if (textBuffer.length > 0) {\n            var startingIndex = textBufferIndex;\n            var text = \"\";\n            do {\n                text += textBuffer[textBufferIndex];\n                var morseChar = Morse.GetCharacter(textBuffer[textBufferIndex]);\n                // Increment and wrap around if necessary\n                ++textBufferIndex;\n                if (textBufferIndex === textBuffer.length)\n                    textBufferIndex = 0;\n                if (morseChar)\n                    return [text, morseChar];\n            } while (textBufferIndex !== startingIndex);\n            return [\"\", null];\n        }\n        var char = Morse.RandomCharacter();\n        return [char.name, char];\n    }\n    TextLoader.Next = Next;\n    Listen(SET_TEXT_BUFFER, updateTextBuffer);\n    Listen(STORY, loadBook);\n    Listen(STOP, resetPosition);\n})(TextLoader || (TextLoader = {}));\n/// <reference path=\"events.ts\"/>\n/// <reference path=\"audiocontext.ts\"/>\n/// <reference path=\"morsetable.ts\"/>\n/// <reference path=\"toneplayer.ts\"/>\n/// <reference path=\"voiceplayer.ts\"/>\n/// <reference path=\"text.ts\"/>\n/// <reference path=\"timing.ts\"/>\nvar Player;\n(function (Player) {\n    var T = Timing;\n    function playNextPattern() {\n        if (T.NowPlaying) {\n            // Fetch a tuple containing the next character and any unplayable text before it (whitespace, etc).\n            var nextCharacter_1 = TextLoader.Next();\n            if (nextCharacter_1[1]) {\n                var sleepTime = 0;\n                // If there is unplayable text, send it to the output buffer and delay for one word-break.\n                if (nextCharacter_1[0] !== nextCharacter_1[1].name) {\n                    Notify(OUTPUT, nextCharacter_1[0].substr(0, nextCharacter_1[0].length - 1));\n                    Notify(PATTERN_START, \" \");\n                    Notify(LETTER, \"\");\n                    // A 7/3 factor comes from character spaces being 3 units and word spaces being 7 units.\n                    sleepTime = T.UnitTime * T.CharSpacing * (7 / 3);\n                }\n                setTimeout(function () {\n                    var currentCharacter = nextCharacter_1[1];\n                    VoicePlayer.PreloadVoice(currentCharacter);\n                    TonePlayer.PlayPattern(currentCharacter);\n                }, sleepTime);\n            }\n            else {\n                Notify(PATTERN_START, \"\");\n                Notify(PATTERN_STOP, null);\n            }\n        }\n    }\n    function updateVolume(value) {\n        MasterGain.gain.setTargetAtTime(value, AudioCtx.currentTime, 0.01);\n    }\n    function startPlaying() {\n        if (!T.NowPlaying) {\n            Notify(NOW_PLAYING, true);\n            setTimeout(playNextPattern, 500);\n        }\n    }\n    function stopPlaying() {\n        Notify(NOW_PLAYING, false);\n    }\n    function patternComplete(char) {\n        if (T.NowPlaying) {\n            if (char == null) {\n                setTimeout(playNextPattern, T.UnitTime * T.CharSpacing);\n            }\n            else {\n                Notify(LETTER, char.name);\n                // playNextPattern() will be called by VOICE_DONE (which is\n                // triggered whether the voice is currently enabled or not).\n                setTimeout(function () { return VoicePlayer.PlayVoice(char); }, T.UnitTime * T.CharSpacing);\n            }\n        }\n    }\n    Listen(VOICE_DONE, playNextPattern);\n    Listen(PAUSE, stopPlaying);\n    Listen(STOP, stopPlaying);\n    Listen(START, startPlaying);\n    Listen(PATTERN_STOP, patternComplete);\n    Listen(SET_VOLUME, updateVolume);\n})(Player || (Player = {}));\n/// <reference path=\"events.ts\"/>\nvar Routing;\n(function (Routing) {\n    var routes = {\n        \"\": VIEW_HOME,\n        \"#playing\": VIEW_PLAYING,\n        \"#settings\": VIEW_SETTINGS,\n        \"#stories\": VIEW_STORIES,\n        \"#text\": VIEW_TEXT\n    };\n    function processHash() {\n        var hash = location.hash;\n        if (routes[hash])\n            Notify(routes[hash], null);\n        if (hash === \"\" && location.href.indexOf(\"#\") > -1)\n            history.replaceState(\"\", document.title, window.location.pathname);\n    }\n    window.addEventListener(\"hashchange\", processHash);\n    document.addEventListener(\"DOMContentLoaded\", processHash);\n})(Routing || (Routing = {}));\n/// <reference path=\"events.ts\"/>\nvar LocalStorage;\n(function (LocalStorage) {\n    Listen(UI_SPACING, function (value) { return localStorage.setItem(\"charSpacing\", value); });\n    Listen(UI_FLASHING, function (value) { return localStorage.setItem(\"flashingEnabled\", value.toString()); });\n    Listen(UI_LETTERS, function (value) { return localStorage.setItem(\"lettersEnabled\", value.toString()); });\n    Listen(UI_NUMBERS, function (value) { return localStorage.setItem(\"numbersEnabled\", value.toString()); });\n    Listen(UI_PITCH, function (value) { return localStorage.setItem(\"pitch\", value); });\n    Listen(UI_SYMBOLS, function (value) { return localStorage.setItem(\"symbolsEnabled\", value.toString()); });\n    Listen(UI_TEXT_BUFFER, function (value) { return localStorage.setItem(\"textBuffer\", value.toString()); });\n    Listen(UI_VOICE, function (value) { return localStorage.setItem(\"voiceEnabled\", value.toString()); });\n    Listen(UI_VOLUME, function (value) { console.log(\"set volume: \", value); localStorage.setItem(\"volume\", value); });\n    Listen(UI_WPM, function (value) { return localStorage.setItem(\"wpm\", value); });\n})(LocalStorage || (LocalStorage = {}));\n/// <reference path=\"../events.ts\"/>\n/// <reference path=\"../morsetable.ts\"/>\n/// <reference path=\"../query.ts\"/>\nvar UI;\n(function (UI) {\n    var homeBtn = Query(\".btn-home\");\n    var startBtns = QueryAll(\".btn-start\");\n    var startBtn = Query(\".btn-start\");\n    var pauseBtn = Query(\".btn-pause\");\n    var stopBtn = Query(\".btn-stop\");\n    var letterElement = Query(\".letter\");\n    var outputBuffer = Query(\".outputBuffer\");\n    var storyLinks = QueryAll(\".story a\");\n    var patternEl = Query(\".view.playing .pattern\");\n    var playState = \"stopped\";\n    pauseBtn.addEventListener(\"click\", function () { return Notify(PAUSE, null); });\n    for (var i = 0; i < startBtns.length; ++i) {\n        startBtns[i].addEventListener(\"click\", function () { return Notify(START, null); });\n    }\n    stopBtn.addEventListener(\"click\", function () { return Notify(STOP, null); });\n    for (var i = 0; i < storyLinks.length; ++i) {\n        var storyLink = storyLinks[i];\n        storyLink.addEventListener(\"click\", function (evt) {\n            evt.preventDefault();\n            var anchor = evt.target;\n            var href = anchor.href;\n            Notify(STORY, href);\n        });\n    }\n    Listen(PAUSE, function () {\n        playState = \"paused\";\n        startBtn.disabled = false;\n        pauseBtn.disabled = true;\n        stopBtn.disabled = true;\n    });\n    Listen(START, function () {\n        playState = \"started\";\n        Notify(WATCH, null);\n        startBtn.disabled = true;\n        pauseBtn.disabled = false;\n        stopBtn.disabled = false;\n    });\n    Listen(STOP, function () {\n        playState = \"stopped\";\n        location.hash = \"\";\n        outputBuffer.innerHTML = \"\";\n        letterElement.innerHTML = \"\";\n        patternEl.innerHTML = \"\";\n        startBtn.disabled = false;\n        pauseBtn.disabled = true;\n        stopBtn.disabled = true;\n    });\n    Listen(LETTER, function (value) { return letterElement.innerHTML = value; });\n    Listen(OUTPUT, function (value) {\n        outputBuffer.innerHTML += value;\n        outputBuffer.scrollTop = outputBuffer.scrollHeight;\n    });\n    Listen(PATTERN_START, function (pattern) {\n        function make(className) {\n            var el = document.createElement(\"span\");\n            el.classList.add(\"element\");\n            el.classList.add(className);\n            return el;\n        }\n        for (var i = 0; i < pattern.length; ++i) {\n            var el = void 0;\n            if (pattern[i] === \".\")\n                el = make(\"dit\");\n            else if (pattern[i] === \"-\")\n                el = make(\"dah\");\n            else if (pattern[i] === \" \")\n                el = make(\"wordSpace\");\n            patternEl.appendChild(el);\n        }\n        patternEl.appendChild(make(\"charSpace\"));\n    });\n    Listen(PATTERN_STOP, function (char) {\n        if (playState !== \"stopped\") {\n            outputBuffer.innerHTML += char == null ? \" \" : char.name;\n            outputBuffer.scrollTop = outputBuffer.scrollHeight;\n        }\n    });\n    Listen(OSC_OFF, function () { return Query(\"body\").classList.remove(\"toneOn\"); });\n    Listen(OSC_ON, function () {\n        if (Settings.userSet.flashingEnabled.checked)\n            Query(\"body\").classList.add(\"toneOn\");\n    });\n    Listen(WATCH, function () { return location.hash = \"#playing\"; });\n})(UI || (UI = {}));\n/// <reference path=\"../events.ts\"/>\nvar Settings;\n(function (Settings) {\n    var resetSettingsButton = QueryId(\"resetSettings\");\n    // Settings text labels\n    var volumeText = Query(\".volumeText\");\n    var charWPMText = Query(\".charWPMText\");\n    var pitchText = Query(\".pitchText\");\n    var charSpacingText = Query(\".charSpacingText\");\n    // Settings inputs\n    Settings.userSet = {\n        volume: QueryId(\"volume\"),\n        charWPM: QueryId(\"charWPM\"),\n        pitch: QueryId(\"pitch\"),\n        charSpacing: QueryId(\"charSpacing\"),\n        voiceEnabled: QueryId(\"voiceEnabled\"),\n        pasteTextBox: QueryId(\"pasteText\"),\n        flashingEnabled: QueryId(\"flashingEnabled\"),\n        lettersEnabled: QueryId(\"lettersEnabled\"),\n        numbersEnabled: QueryId(\"numbersEnabled\"),\n        symbolsEnabled: QueryId(\"symbolsEnabled\")\n    };\n    var defaults = {\n        charSpacing: 8,\n        flashingEnabled: false,\n        lettersEnabled: true,\n        numbersEnabled: false,\n        pitch: 650,\n        symbolsEnabled: false,\n        voiceEnabled: true,\n        volume: 0.40,\n        wpm: 10\n    };\n    function Adjust(name, value) {\n        Notify(name.replace(/^set_/, \"ui_\"), value.toString());\n        Notify(name, value);\n    }\n    Settings.userSet.volume.addEventListener(\"input\", function () { return Adjust(SET_VOLUME, parseFloat(Settings.userSet.volume.value)); });\n    Settings.userSet.charWPM.addEventListener(\"input\", function () { return Adjust(SET_WPM, parseInt(Settings.userSet.charWPM.value)); });\n    Settings.userSet.charSpacing.addEventListener(\"input\", function () { return Adjust(SET_SPACING, parseInt(Settings.userSet.charSpacing.value)); });\n    Settings.userSet.pitch.addEventListener(\"input\", function () { return Adjust(SET_PITCH, parseInt(Settings.userSet.pitch.value)); });\n    Settings.userSet.pasteTextBox.addEventListener(\"input\", function () { return Adjust(SET_TEXT_BUFFER, Settings.userSet.pasteTextBox.value); });\n    Settings.userSet.voiceEnabled.addEventListener(\"change\", function () { return Adjust(SET_VOICE, Settings.userSet.voiceEnabled.checked); });\n    Settings.userSet.flashingEnabled.addEventListener(\"change\", function () { return Adjust(SET_FLASHING_ENABLED, Settings.userSet.flashingEnabled.checked); });\n    Settings.userSet.lettersEnabled.addEventListener(\"change\", function () { return Adjust(SET_LETTERS, Settings.userSet.lettersEnabled.checked); });\n    Settings.userSet.numbersEnabled.addEventListener(\"change\", function () { return Adjust(SET_NUMBERS, Settings.userSet.numbersEnabled.checked); });\n    Settings.userSet.symbolsEnabled.addEventListener(\"change\", function () { return Adjust(SET_SYMBOLS, Settings.userSet.symbolsEnabled.checked); });\n    resetSettingsButton.addEventListener(\"click\", function () {\n        Adjust(SET_SPACING, defaults.charSpacing);\n        Adjust(SET_FLASHING_ENABLED, defaults.flashingEnabled);\n        Adjust(SET_LETTERS, defaults.lettersEnabled);\n        Adjust(SET_NUMBERS, defaults.numbersEnabled);\n        Adjust(SET_PITCH, defaults.pitch);\n        Adjust(SET_SYMBOLS, defaults.symbolsEnabled);\n        Adjust(SET_VOICE, defaults.voiceEnabled);\n        Adjust(SET_VOLUME, defaults.volume);\n        Adjust(SET_WPM, defaults.wpm);\n    });\n    // Update UI in response to settings changes\n    Listen(SET_SPACING, function (value) {\n        charSpacingText.value = value.toString();\n        Settings.userSet.charSpacing.value = value.toString();\n    });\n    Listen(SET_FLASHING_ENABLED, function (value) { return Settings.userSet.flashingEnabled.checked = value; });\n    Listen(SET_LETTERS, function (value) { return Settings.userSet.lettersEnabled.checked = value; });\n    Listen(SET_NUMBERS, function (value) { return Settings.userSet.numbersEnabled.checked = value; });\n    Listen(SET_PITCH, function (value) {\n        pitchText.value = value.toString();\n        Settings.userSet.pitch.value = value.toString();\n    });\n    Listen(SET_SYMBOLS, function (value) { return Settings.userSet.symbolsEnabled.checked = value; });\n    Listen(SET_TEXT_BUFFER, function (value) { return Settings.userSet.pasteTextBox.value = value; });\n    Listen(SET_VOICE, function (value) { return Settings.userSet.voiceEnabled.checked = value; });\n    Listen(SET_VOLUME, function (value) {\n        volumeText.value = Math.floor(value * 100).toString();\n        Settings.userSet.volume.value = value.toString();\n    });\n    Listen(SET_WPM, function (value) {\n        charWPMText.value = value.toString();\n        Settings.userSet.charWPM.value = value.toString();\n    });\n    document.addEventListener(\"DOMContentLoaded\", function () {\n        // Trigger events to initialize state\n        Notify(SET_VOLUME, localStorage.getItem(\"volume\") || defaults.volume);\n        Notify(SET_WPM, localStorage.getItem(\"wpm\") || defaults.wpm);\n        Notify(SET_SPACING, localStorage.getItem(\"charSpacing\") || defaults.charSpacing);\n        Notify(SET_PITCH, localStorage.getItem(\"pitch\") || defaults.pitch);\n        var voiceEnabledStorage = localStorage.getItem(\"voiceEnabled\");\n        if (voiceEnabledStorage == null)\n            Notify(SET_VOICE, defaults.voiceEnabled);\n        else\n            Notify(SET_VOICE, voiceEnabledStorage === \"true\");\n        var flashingEnabledStorage = localStorage.getItem(\"flashingEnabled\");\n        if (flashingEnabledStorage == null)\n            Notify(SET_FLASHING_ENABLED, defaults.flashingEnabled);\n        else\n            Notify(SET_FLASHING_ENABLED, flashingEnabledStorage === \"true\");\n        var lettersEnabledStorage = localStorage.getItem(\"lettersEnabled\");\n        if (lettersEnabledStorage == null)\n            Notify(SET_LETTERS, defaults.lettersEnabled);\n        else\n            Notify(SET_LETTERS, lettersEnabledStorage === \"true\");\n        var numbersEnabledStorage = localStorage.getItem(\"numbersEnabled\");\n        if (numbersEnabledStorage == null)\n            Notify(SET_NUMBERS, defaults.numbersEnabled);\n        else\n            Notify(SET_NUMBERS, numbersEnabledStorage === \"true\");\n        var symbolsEnabledStorage = localStorage.getItem(\"symbolsEnabled\");\n        if (symbolsEnabledStorage == null)\n            Notify(SET_SYMBOLS, defaults.symbolsEnabled);\n        else\n            Notify(SET_SYMBOLS, symbolsEnabledStorage === \"true\");\n    });\n})(Settings || (Settings = {}));\n/// <reference path=\"../events.ts\"/>\n/// <reference path=\"../query.ts\"/>\nvar Views;\n(function (Views) {\n    function view(selector, menuItem) {\n        var views = QueryAll(\".view\");\n        for (var i = 0; i < views.length; ++i) {\n            var view_1 = views[i];\n            if (!view_1.classList.contains(\"disabled\"))\n                view_1.classList.add(\"disabled\");\n        }\n        var viewToShow = Query(selector);\n        viewToShow.classList.remove(\"disabled\");\n        // Highlight the menu item\n        var controls = QueryAll(\".menu .btn\");\n        for (var i = 0; i < controls.length; ++i) {\n            var control = controls[i];\n            control.classList.remove(\"active\");\n        }\n        menuItem.classList.add(\"active\");\n    }\n    Listen(VIEW_HOME, function () { return view(\".home\", Query(\".btn-home\")); });\n    Listen(VIEW_SETTINGS, function () { return view(\".settings\", Query(\".btn-settings\")); });\n    Listen(VIEW_PLAYING, function () { return view(\".playing\", Query(\".btn-playing\")); });\n    Listen(VIEW_STORIES, function () { return view(\".stories\", Query(\".btn-stories\")); });\n    Listen(VIEW_TEXT, function () { return view(\".paste\", Query(\".btn-paste\")); });\n})(Views || (Views = {}));\n\n//# sourceMappingURL=app.js.map\n"]}