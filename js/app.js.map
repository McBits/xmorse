{"version":3,"sources":["audiocontext.ts","events.ts","query.ts","fullscreen.ts","morsetable.ts","timing.ts","toneplayer.ts","voiceplayer.ts","text.ts","player.ts","routing.ts","storage.ts","ui/controls.ts","ui/settings.ts","ui/views.ts"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["const AudioCtx: AudioContext = new AudioContext();\nconst MasterGain = AudioCtx.createGain();\nMasterGain.gain.value = 0.5;\nMasterGain.connect(AudioCtx.destination);\n","function Notify(name: string, value: any)\n{\n\tdocument.dispatchEvent(new CustomEvent(name, { detail: value }));\n}\n\nfunction Listen<T>(name: string, handler: (value?: T) => any)\n{\n\tdocument.addEventListener(name, (evt: CustomEvent) => handler(evt.detail));\n}\n\nconst EMIT_LETTER = \"emit_letter\";\nconst EMIT_OUTPUT = \"emit_output\";\nconst PATTERN_START = \"patternStart\";\nconst PATTERN_STOP = \"patternStop\";\nconst CMD_CLEAR_OUTPUT = \"cmd_clearOutput\";\nconst CMD_PAUSE = \"cmd_pause\";\nconst CMD_START = \"cmd_start\";\nconst CMD_STORY = \"cmd_story\";\nconst CMD_STOP = \"cmd_stop\";\nconst SET_SPACING = \"set_spacing\";\nconst SET_LETTERS = \"set_letters\";\nconst SET_NOW_PLAYING = \"set_nowPlaying\";\nconst SET_NUMBERS = \"set_numbers\";\nconst SET_PITCH = \"set_pitch\";\nconst SET_SYMBOLS = \"set_symbols\";\nconst SET_TEXT_BUFFER = \"set_textBuffer\";\nconst SET_UNIT_TIME = \"set_unitTime\";\nconst SET_VOICE = \"set_voice\";\nconst SET_VOLUME = \"set_volume\";\nconst SET_WPM = \"set_wpm\";\nconst UI_SPACING = \"ui_spacing\";\nconst UI_LETTERS = \"ui_letters\";\nconst UI_NOW_PLAYING = \"ui_nowPlaying\";\nconst UI_NUMBERS = \"ui_numbers\";\nconst UI_PITCH = \"ui_pitch\";\nconst UI_SYMBOLS = \"ui_symbols\";\nconst UI_TEXT_BUFFER = \"ui_textBuffer\";\nconst UI_VOICE = \"ui_voice\";\nconst UI_VOLUME = \"ui_volume\";\nconst UI_WPM = \"ui_wpm\";\nconst VIEW_HOME = \"view_home\";\nconst VIEW_SETTINGS = \"view_settings\";\nconst VIEW_PLAYING = \"view_player\";\nconst VIEW_STORIES = \"view_stories\";\nconst VIEW_TEXT = \"view_text\";\nconst EMIT_VOICE_DONE = \"emit_voiceDone\";\nconst WATCH = \"watch\";\n","function Query<T extends Element>(selector: string, element?: Element): T\n{\n\treturn <T>(element || document).querySelector(selector);\n}\n\nfunction QueryAll<T extends Element>(selector: string, element?: Element): NodeListOf<T>\n{\n\treturn <NodeListOf<T>>(element || document).querySelectorAll(selector);\n}\n\nfunction QueryId<T extends HTMLElement>(id: string): T\n{\n\treturn <T>document.getElementById(id);\n}\n","/// <reference path=\"query.ts\"/>\n\nnamespace FullScreen\n{\n\tconst fullScreenButton = Query(\".btn-fullscreen\");\n\tconst playingView = document.body.parentElement;\n\tconst controls = Query(\".controls\");\n\tconst menu = Query(\".menu\");\n\tconst sidebar = Query(\".sidebar\");\n\n\tlet isFullScreen = false;\n\tlet hideControlsInterval: number;\n\tlet lastActivity = Date.now();\n\tlet hideControlsMS = 2000;\n\tlet controlsVisible = false;\n\tlet cursorVisible = false;\n\n\tfunction exitFullScreen()\n\t{\n\t\tif (document.exitFullscreen)\n\t\t\tdocument.exitFullscreen();\n\t\telse if (document[\"webkitExitFullscreen\"])\n\t\t\tdocument[\"webkitExitFullscreen\"]();\n\t\telse if (document[\"mozCancelFullScreen\"])\n\t\t\tdocument[\"mozCancelFullScreen\"]();\n\t}\n\n\tfunction enterFullScreen()\n\t{\n\t\tif (document.fullscreenEnabled)\n\t\t\tplayingView.requestFullscreen();\n\t\telse if (document[\"webkitFullscreenEnabled\"])\n\t\t\tplayingView[\"webkitRequestFullscreen\"]();\n\t\telse if (document[\"mozFullScreenEnabled\"])\n\t\t\tplayingView[\"mozRequestFullScreen\"]();\n\t}\n\n\tfunction toggleFullScreen()\n\t{\n\t\tif (isFullScreen)\n\t\t\texitFullScreen();\n\t\telse\n\t\t\tenterFullScreen();\n\t}\n\n\tfunction fullScreenChanged()\n\t{\n\t\tisFullScreen = !isFullScreen;\n\t\tfullScreenButton.textContent = isFullScreen ? \"Exit full screen\" : \"Full screen\";\n\t\tlastActivity = Date.now();\n\t}\n\n\tfunction markTime()\n\t{\n\t\tlastActivity = Date.now();\n\t}\n\n\tfunction hideOrReveal()\n\t{\n\t\tif (isFullScreen && Date.now() - lastActivity > hideControlsMS)\n\t\t{\n\t\t\thideControls();\n\t\t\thideCursor();\n\t\t\treturn;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tshowControls();\n\t\t\tshowCursor();\n\t\t}\n\t}\n\n\tfunction hideCursor()\n\t{\n\t\tif (cursorVisible)\n\t\t\tplayingView.style.cursor = \"none\";\n\n\t\tcursorVisible = false;\n\t}\n\n\tfunction showCursor()\n\t{\n\t\tif (!cursorVisible)\n\t\t\tplayingView.style.cursor = \"default\";\n\n\t\tcursorVisible = true;\n\t}\n\n\tfunction hideControls()\n\t{\n\t\tif (controlsVisible)\n\t\t{\n\t\t\tfullScreenButton.classList.add(\"disabled\");\n\t\t\tcontrols.classList.add(\"disabled\");\n\t\t\tmenu.classList.add(\"disabled\");\n\t\t\tsidebar.classList.add(\"disabled\");\n\t\t}\n\n\t\tcontrolsVisible = false;\n\t}\n\n\tfunction showControls()\n\t{\n\t\tif (!controlsVisible)\n\t\t{\n\t\t\tfullScreenButton.classList.remove(\"disabled\");\n\t\t\tcontrols.classList.remove(\"disabled\");\n\t\t\tmenu.classList.remove(\"disabled\");\n\t\t\tsidebar.classList.remove(\"disabled\");\n\t\t}\n\n\t\tcontrolsVisible = true;\n\t}\n\n\tfunction start()\n\t{\n\t\tdocument.addEventListener(\"mousemove\", markTime);\n\t\thideControlsInterval = setInterval(hideOrReveal, 200);\n\t}\n\n\tfunction stop()\n\t{\n\t\tclearInterval(hideControlsInterval);\n\t\tdocument.removeEventListener(\"mousemove\", markTime);\n\t\tshowCursor();\n\t\tshowControls();\n\t\tif (isFullScreen)\n\t\t\texitFullScreen();\n\t}\n\n\tListen(CMD_START, start);\n\tListen(CMD_STOP, stop);\n\n\tif (document.fullscreenEnabled)\n\t\tdocument.addEventListener(\"fullscreenchange\", fullScreenChanged);\n\telse if (document[\"webkitFullscreenEnabled\"])\n\t\tdocument.addEventListener(\"webkitfullscreenchange\", fullScreenChanged);\n\telse if (document[\"mozFullScreenEnabled\"])\n\t\tdocument.addEventListener(\"mozfullscreenchange\", fullScreenChanged);\n\n\tfullScreenButton.addEventListener(\"click\", toggleFullScreen);\n}\n","/// <reference path=\"events.ts\"/>\n\nnamespace Morse\n{\n\texport interface Char\n\t{\n\t\tname: string;\n\t\tpattern: string;\n\t}\n\n\t// 0 1 2 3 4 5 6 7 8 9 A B C D E F G H I J K L M N O P Q R S T U V W X Y Z . ? ! , : ; ' - / ( ) @ = + \"\n\n\tconst letterPatterns: { [char: string]: Char } = {\n\t\t\"A\": { name: \"A\", pattern: \".-\" },\n\t\t\"B\": { name: \"B\", pattern: \"-...\" },\n\t\t\"C\": { name: \"C\", pattern: \"-.-.\" },\n\t\t\"D\": { name: \"D\", pattern: \"-..\" },\n\t\t\"E\": { name: \"E\", pattern: \".\" },\n\t\t\"F\": { name: \"F\", pattern: \"..-.\" },\n\t\t\"G\": { name: \"G\", pattern: \"--.\" },\n\t\t\"H\": { name: \"H\", pattern: \"....\" },\n\t\t\"I\": { name: \"I\", pattern: \"..\" },\n\t\t\"J\": { name: \"J\", pattern: \".---\" },\n\t\t\"K\": { name: \"K\", pattern: \"-.-\" },\n\t\t\"L\": { name: \"L\", pattern: \".-..\" },\n\t\t\"M\": { name: \"M\", pattern: \"--\" },\n\t\t\"N\": { name: \"N\", pattern: \"-.\" },\n\t\t\"O\": { name: \"O\", pattern: \"---\" },\n\t\t\"P\": { name: \"P\", pattern: \".--.\" },\n\t\t\"Q\": { name: \"Q\", pattern: \"--.-\" },\n\t\t\"R\": { name: \"R\", pattern: \".-.\" },\n\t\t\"S\": { name: \"S\", pattern: \"...\" },\n\t\t\"T\": { name: \"T\", pattern: \"-\" },\n\t\t\"U\": { name: \"U\", pattern: \"..-\" },\n\t\t\"V\": { name: \"V\", pattern: \"...-\" },\n\t\t\"W\": { name: \"W\", pattern: \".--\" },\n\t\t\"X\": { name: \"X\", pattern: \"-..-\" },\n\t\t\"Y\": { name: \"Y\", pattern: \"-.--\" },\n\t\t\"Z\": { name: \"Z\", pattern: \"--..\" }\n\t};\n\n\tconst numberPatterns: { [char: string]: Char } = {\n\t\t\"0\": { name: \"0\", pattern: \"-----\" },\n\t\t\"1\": { name: \"1\", pattern: \".----\" },\n\t\t\"2\": { name: \"2\", pattern: \"..---\" },\n\t\t\"3\": { name: \"3\", pattern: \"...--\" },\n\t\t\"4\": { name: \"4\", pattern: \"....-\" },\n\t\t\"5\": { name: \"5\", pattern: \".....\" },\n\t\t\"6\": { name: \"6\", pattern: \"-....\" },\n\t\t\"7\": { name: \"7\", pattern: \"--...\" },\n\t\t\"8\": { name: \"8\", pattern: \"---..\" },\n\t\t\"9\": { name: \"9\", pattern: \"----.\" }\n\t};\n\n\tconst symbolPatterns: { [char: string]: Char } = {\n\t\t\".\": { name: \".\", pattern: \".-.-.-\" },\n\t\t\"?\": { name: \"?\", pattern: \"..--..\" },\n\t\t\"!\": { name: \"!\", pattern: \"-.-.--\" },\n\t\t\",\": { name: \",\", pattern: \"--..--\" },\n\t\t\":\": { name: \":\", pattern: \"---...\" },\n\t\t\";\": { name: \";\", pattern: \"-.-.-.\" },\n\t\t\"'\": { name: \"'\", pattern: \".----.\" },\n\t\t\"-\": { name: \"-\", pattern: \"-....-\" },\n\t\t\"/\": { name: \"/\", pattern: \"-..-.\" },\n\t\t\"(\": { name: \"(\", pattern: \"-.--.\" },\n\t\t\")\": { name: \")\", pattern: \"-.--.-\" },\n\t\t\"@\": { name: \"@\", pattern: \".--.-.\" },\n\t\t\"=\": { name: \"=\", pattern: \"-...-\" },\n\t\t\"+\": { name: \"+\", pattern: \".-.-.\" },\n\t\t\"\\\"\": { name: \"\\\"\", pattern: \".-..-.\" }\n\t};\n\n\tconst symbolNames: { [char: string]: string } = {\n\t\t\".\": \"PERIOD\",\n\t\t\"?\": \"QUESTION\",\n\t\t\"!\": \"EXCLAMATION\",\n\t\t\",\": \"COMMA\",\n\t\t\":\": \"COLON\",\n\t\t\";\": \"SEMICOLON\",\n\t\t\"'\": \"APOSTROPHE\",\n\t\t\"-\": \"DASH\",\n\t\t\"/\": \"SLASH\",\n\t\t\"(\": \"OPEN_BRACKET\",\n\t\t\")\": \"CLOSE_BRACKET\",\n\t\t\"@\": \"AT\",\n\t\t\"=\": \"EQUALS\",\n\t\t\"+\": \"PLUS\",\n\t\t\"\\\"\": \"QUOTE\"\n\t};\n\n\tconst letters = Object.keys(letterPatterns);\n\n\tconst numbers = Object.keys(numberPatterns);\n\n\tconst symbols = Object.keys(symbolPatterns);\n\n\tlet lettersEnabled = true;\n\n\tlet numbersEnabled = false;\n\n\tlet symbolsEnabled = false;\n\n\texport function AllCharacters(): Char[]\n\t{\n\t\treturn letters.map(l => letterPatterns[l])\n\t\t\t.concat(numbers.map(n => numberPatterns[n]))\n\t\t\t.concat(symbols.map(s => symbolPatterns[s]));\n\t}\n\n\texport function RandomCharacter(): Char\n\t{\n\t\tlet chars = [];\n\n\t\tif (lettersEnabled)\n\t\t\tchars = chars.concat(letters);\n\n\t\tif (numbersEnabled)\n\t\t\tchars = chars.concat(numbers);\n\n\t\tif (symbolsEnabled)\n\t\t\tchars = chars.concat(symbols);\n\n\t\tif (chars.length > 0)\n\t\t{\n\t\t\tconst char = chars[Math.floor(Math.random() * chars.length)];\n\n\t\t\treturn letterPatterns[char] || numberPatterns[char] || symbolPatterns[char];\n\t\t}\n\n\t\treturn null;\n\t}\n\n\texport function GetCharacter(char: string): Char\n\t{\n\t\tchar = char.toUpperCase();\n\n\t\tlet found = letterPatterns[char];\n\t\tif (found)\n\t\t\treturn found;\n\n\t\tfound = numberPatterns[char];\n\t\tif (found)\n\t\t\treturn found;\n\n\t\tfound = symbolPatterns[char];\n\t\tif (found)\n\t\t\treturn found;\n\n\t\tif (char === \"\")\n\t\t\treturn { name: \"\", pattern: \"\" };\n\n\t\tif (char === \" \")\n\t\t\treturn { name: \" \", pattern: \" \" };\n\n\t\treturn undefined;\n\t}\n\n\texport function fileName(char: Char)\n\t{\n\t\tif (Object.keys(letterPatterns).indexOf(char.name) > -1\n\t\t\t|| Object.keys(numberPatterns).indexOf(char.name) > -1\n\t\t\t|| Object.keys(symbolNames).indexOf(char.name) > -1)\n\t\t{\n\n\t\t\tlet fileName = symbolNames[char.name];\n\n\t\t\tif (!fileName)\n\t\t\t\tfileName = char.name;\n\n\t\t\tfileName += \".mp3\";\n\n\t\t\treturn fileName;\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tListen(SET_LETTERS, (value: boolean) => lettersEnabled = value);\n\tListen(SET_NUMBERS, (value: boolean) => numbersEnabled = value);\n\tListen(SET_SYMBOLS, (value: boolean) => symbolsEnabled = value);\n}\n","/// <reference path=\"events.ts\"/>\n\nnamespace Timing\n{\n\texport let NowPlaying: boolean;\n\texport let CharSpacing: number = 1;\n\texport let UnitTime: number;\n\texport let DitUnits = 1;\n\texport let DahUnits = 3;\n\texport let SampleRate = 48000;\n\texport let Ramp = 0.01;\n\n\tListen(SET_NOW_PLAYING, (value: boolean) => NowPlaying = value);\n\t// With 60 seconds per minute and 50 units in \"PARIS\":\n\t//     UnitTime in seconds = 60 / (WPM * 50)\n\t// This simplifies to 1.2 / WPM.\n\tListen(SET_WPM, (value: number) => (UnitTime = 1.2 / value) && Notify(SET_UNIT_TIME, UnitTime));\n\tListen(SET_SPACING, (value: number) => CharSpacing = value);\n}\n","/// <reference path=\"events.ts\"/>\n/// <reference path=\"audiocontext.ts\"/>\n/// <reference path=\"morsetable.ts\"/>\n/// <reference path=\"timing.ts\"/>\nnamespace CharBufferCache\n{\n\tlet cache = {};\n\n\texport function Add(char: string, buffer: AudioBuffer)\n\t{\n\t\tcache[char] = buffer;\n\t}\n\n\texport function Get(char: string)\n\t{\n\t\treturn cache[char];\n\t}\n\n\texport function Clear()\n\t{\n\t\tcache = {};\n\t}\n}\n\nnamespace TonePlayer\n{\n\tlet T = Timing;\n\n\tlet Freq = 500;\n\tlet ditBuffer: AudioBuffer;\n\tlet dahBuffer: AudioBuffer;\n\tlet charSpaceBuffer: AudioBuffer;\n\tlet wordSpaceBuffer: AudioBuffer;\n\tconst ramp = 0.0;\n\n\tfunction initializeBuffers()\n\t{\n\t\tCharBufferCache.Clear();\n\t\tconst allCharacters = Morse.AllCharacters();\n\t\tfor (let i = 0; i < allCharacters.length; ++i)\n\t\t{\n\t\t\tconst char = allCharacters[i];\n\t\t\tconst buffer = createCharacterBuffer(char);\n\t\t\tCharBufferCache.Add(char.name, buffer);\n\t\t}\n\n\t\t// Empty character\n\t\tCharBufferCache.Add(\"\", AudioCtx.createBuffer(1, Timing.UnitTime * 2 * Timing.SampleRate, Timing.SampleRate));\n\n\t\t// Space character\n\t\tCharBufferCache.Add(\" \", AudioCtx.createBuffer(1, Timing.UnitTime * 4 * Timing.SampleRate, Timing.SampleRate));\n\t}\n\n\tfunction addToneToBuffer(units: number, samplesPerUnit: number, data: Float32Array, initialSample: number): void\n\t{\n\t\tconst omega = 2 * Math.PI * Freq / Timing.SampleRate;\n\n\t\t// Number of audio samples in the ramp up/down periods.\n\t\tconst rampSamples = Math.min(Math.ceil(Timing.Ramp * Timing.SampleRate), samplesPerUnit);\n\n\t\t// Number of samples containing audio. Ramp-up is included in the \"on\" time, but ramp-down is appended.\n\t\tconst soundSamples = Math.ceil(samplesPerUnit * units);\n\n\t\tfor (let t = initialSample, rampPos = 0; t < initialSample + rampSamples; ++t, ++rampPos)\n\t\t{\n\t\t\tdata[t] = Math.sin(omega * t) * (rampPos / rampSamples);\n\t\t}\n\n\t\tfor (let t = initialSample + rampSamples; t < initialSample + soundSamples - rampSamples; ++t)\n\t\t{\n\t\t\tdata[t] = Math.sin(omega * t);\n\t\t}\n\n\t\tfor (let t = initialSample + soundSamples - rampSamples, rampPos = rampSamples; t < initialSample + soundSamples; ++t, --rampPos)\n\t\t{\n\t\t\tdata[t] = Math.sin(omega * t) * (rampPos / rampSamples);\n\t\t}\n\t}\n\n\tfunction countUnitsInPattern(pattern: string): number\n\t{\n\t\tlet total = 0;\n\n\t\tfor (let i = 0; i < pattern.length; ++i)\n\t\t{\n\t\t\tswitch (pattern[i])\n\t\t\t{\n\t\t\t\tcase \".\":\n\t\t\t\t\ttotal += 2;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"-\":\n\t\t\t\t\ttotal += 4;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn total;\n\t}\n\n\tfunction createCharacterBuffer(char: Morse.Char): AudioBuffer\n\t{\n\t\tconst pattern = char.pattern;\n\n\t\t// Number of audio samples per Morse code unit of time.\n\t\tconst samplesPerUnit = Math.ceil(Timing.UnitTime * Timing.SampleRate);\n\n\t\t// Number of audio samples in the ramp up/down periods.\n\t\tconst rampSamples = Math.min(Math.ceil(Timing.Ramp * Timing.SampleRate), samplesPerUnit);\n\n\t\tconst units = countUnitsInPattern(pattern);\n\n\t\t// Number of samples containing audio. Ramp-up is included in the \"on\" time, but ramp-down is appended.\n\t\tconst soundSamples = Math.ceil(samplesPerUnit * units);\n\n\t\t// Total samples in the clip. This is the \"on\" time + ramp-down time + any remaining silence.\n\t\tconst totalSamples = Math.ceil(samplesPerUnit * units + (samplesPerUnit * Timing.CharSpacing));\n\n\t\tconst buffer = AudioCtx.createBuffer(1, totalSamples, Timing.SampleRate);\n\t\tconst data = buffer.getChannelData(0);\n\n\t\tlet pos = 0;\n\n\t\tfor (let i = 0; i < pattern.length; ++i)\n\t\t{\n\t\t\tswitch (pattern[i])\n\t\t\t{\n\t\t\t\tcase \".\":\n\t\t\t\t\taddToneToBuffer(1, samplesPerUnit, data, pos);\n\t\t\t\t\tpos += 2 * samplesPerUnit;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"-\":\n\t\t\t\t\taddToneToBuffer(3, samplesPerUnit, data, pos);\n\t\t\t\t\tpos += 4 * samplesPerUnit;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn buffer;\n\t}\n\n\texport function PlayPattern(char: Morse.Char): void\n\t{\n\t\tNotify(EMIT_LETTER, char.name);\n\t\tNotify(PATTERN_START, char.pattern);\n\n\t\t// const charTones = char.pattern.split(\"\");\n\n\t\t// playCharTone(char, charTones, ditBuffer, dahBuffer);\n\n\t\tconst src = AudioCtx.createBufferSource();\n\t\tsrc.connect(MasterGain);\n\t\tsrc.buffer = CharBufferCache.Get(char.name);\n\t\tsrc.addEventListener(\"ended\", () => Notify(PATTERN_STOP, char));\n\t\tsrc.start();\n\t}\n\n\tListen(SET_PITCH, (value: number) => { Freq = value; initializeBuffers(); });\n\tListen(SET_UNIT_TIME, (value: number) => initializeBuffers());\n\tListen(SET_SPACING, (value: number) => initializeBuffers());\n}\n","/// <reference path=\"morsetable.ts\"/>\n/// <reference path=\"events.ts\"/>\n/// <reference path=\"audiocontext.ts\"/>\n/// <reference path=\"timing.ts\"/>\n\nnamespace VoicePlayer\n{\n\t// For caching audio files as they're loaded\n\tconst audioBuffers: { [char: string]: AudioBuffer } = {};\n\n\t// Wire up audio\n\tconst voiceGain = AudioCtx.createGain();\n\tvoiceGain.gain.value = 0.85;\n\tvoiceGain.connect(MasterGain);\n\n\tlet voiceEnabled = false;\n\tlet loading: { [_: string]: boolean } = {};\n\tlet loaded: { [_: string]: boolean } = {};\n\tlet playWhenDone = false;\n\n\tfunction voiceLoaded(char: Morse.Char): void\n\t{\n\t\tconst playNow = playWhenDone;\n\t\tplayWhenDone = false;\n\n\t\tif (playNow)\n\t\t\tPlayVoice(char);\n\t}\n\n\tfunction loadVoice(char: Morse.Char): void\n\t{\n\t\tif (loaded[char.name])\n\t\t\tvoiceLoaded(char);\n\t\telse\n\t\t{\n\t\t\tloading[char.name] = true;\n\t\t\tfetch(\"/snd/\" + Morse.fileName(char), { method: \"GET\" })\n\t\t\t\t.then(response =>\n\t\t\t\t{\n\t\t\t\t\tif (response.status === 200)\n\t\t\t\t\t\tresponse.arrayBuffer()\n\t\t\t\t\t\t\t.then(arrayBuffer =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tAudioCtx.decodeAudioData(\n\t\t\t\t\t\t\t\t\tarrayBuffer,\n\t\t\t\t\t\t\t\t\tfunction (audioBuffer: AudioBuffer)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\taudioBuffers[char.name] = audioBuffer;\n\t\t\t\t\t\t\t\t\t\tloading[char.name] = false;\n\t\t\t\t\t\t\t\t\t\tloaded[char.name] = true;\n\n\t\t\t\t\t\t\t\t\t\tvoiceLoaded(char);\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t(err: DOMException) => console.error(\"Error decoding audio source: \", err));\n\t\t\t\t\t\t\t});\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tconsole.error(\"Failed to load voice for char: \", char);\n\t\t\t\t\t\tloading[char.name] = false;\n\t\t\t\t\t\tplayWhenDone = false;\n\t\t\t\t\t\tNotify(EMIT_VOICE_DONE, char);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(reason => console.error(reason));\n\t\t}\n\t}\n\n\texport function PreloadVoice(char: Morse.Char): void\n\t{\n\t\tif (voiceEnabled && !loaded[char.name] && loading[char.name])\n\t\t\tloadVoice(char);\n\t}\n\n\texport function PlayVoice(char: Morse.Char): void\n\t{\n\t\tif (Timing.NowPlaying)\n\t\t{\n\t\t\tif (!voiceEnabled || Morse.fileName(char) === undefined)\n\t\t\t\tNotify(EMIT_VOICE_DONE, char);\n\t\t\telse if (loading[char.name])\n\t\t\t\tplayWhenDone = true;\n\t\t\telse if (!loaded[char.name])\n\t\t\t{\n\t\t\t\tplayWhenDone = true;\n\t\t\t\tloadVoice(char);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst buffer = audioBuffers[char.name];\n\t\t\t\tconst audioSource = AudioCtx.createBufferSource();\n\t\t\t\taudioSource.addEventListener(\"ended\", () => Notify(EMIT_VOICE_DONE, char));\n\t\t\t\taudioSource.buffer = buffer;\n\t\t\t\taudioSource.connect(voiceGain);\n\t\t\t\taudioSource.start(0);\n\t\t\t}\n\t\t}\n\t}\n\n\tListen(SET_VOICE, (value: boolean) => voiceEnabled = value);\n}\n","/// <reference path=\"events.ts\"/>\n/// <reference path=\"morsetable.ts\"/>\n\nnamespace TextLoader\n{\n\tlet textBuffer = \"\";\n\tlet textBufferIndex = -1;\n\n\tfunction resetPosition()\n\t{\n\t\ttextBufferIndex = textBuffer.length > 0 ? 0 : -1;\n\t}\n\n\tfunction updateTextBuffer(text: string)\n\t{\n\t\ttextBuffer = text.toUpperCase() + \"\\n\";\n\t\tresetPosition();\n\t}\n\n\tfunction loadBook(href: string): void\n\t{\n\t\tfetch(href, { method: \"GET\" })\n\t\t\t.then(response => response.text()\n\t\t\t\t.then(value =>\n\t\t\t\t{\n\t\t\t\t\tNotify(CMD_CLEAR_OUTPUT, null);\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tNotify(SET_TEXT_BUFFER, value);\n\t\t\t\t\t\tNotify(CMD_START, null);\n\t\t\t\t\t}, 500);\n\t\t\t\t}));\n\t}\n\n\texport function Next(): [string, Morse.Char]\n\t{\n\t\tif (textBuffer.length > 0)\n\t\t{\n\t\t\tconst startingIndex = textBufferIndex;\n\t\t\tlet text = \"\";\n\n\t\t\tdo\n\t\t\t{\n\t\t\t\ttext += textBuffer[textBufferIndex];\n\t\t\t\tconst morseChar = Morse.GetCharacter(textBuffer[textBufferIndex]);\n\n\t\t\t\t// Increment and wrap around if necessary\n\t\t\t\t++textBufferIndex;\n\t\t\t\tif (textBufferIndex === textBuffer.length)\n\t\t\t\t\ttextBufferIndex = 0;\n\n\t\t\t\tif (morseChar)\n\t\t\t\t\treturn [text, morseChar];\n\t\t\t}\n\t\t\twhile (textBufferIndex !== startingIndex);\n\n\t\t\treturn [\"\", null];\n\t\t}\n\n\t\tconst char = Morse.RandomCharacter();\n\n\t\treturn [char.name, char];\n\t}\n\n\tListen(SET_TEXT_BUFFER, updateTextBuffer);\n\tListen(CMD_STORY, loadBook);\n\tListen(CMD_STOP, resetPosition);\n}\n","/// <reference path=\"events.ts\"/>\n/// <reference path=\"audiocontext.ts\"/>\n/// <reference path=\"morsetable.ts\"/>\n/// <reference path=\"toneplayer.ts\"/>\n/// <reference path=\"voiceplayer.ts\"/>\n/// <reference path=\"text.ts\"/>\n/// <reference path=\"timing.ts\"/>\n\nnamespace Player\n{\n\tconst T = Timing;\n\n\tfunction playNextPattern(): void\n\t{\n\t\tif (T.NowPlaying)\n\t\t{\n\t\t\t// Fetch a tuple containing the next character and any unplayable text before it (whitespace, etc).\n\t\t\tlet [text, morseChar] = TextLoader.Next() || [\" \", {name: \" \", pattern: \"\"}];\n\n\t\t\tif (morseChar)\n\t\t\t{\n\t\t\t\tlet sleepTime = 0;\n\n\t\t\t\t// If there is unplayable text, send it to the output buffer and delay for one word-break.\n\t\t\t\tif (text !== morseChar.name)\n\t\t\t\t{\n\t\t\t\t\tNotify(EMIT_OUTPUT, text.substr(0, text.length - 1));\n\t\t\t\t\tNotify(PATTERN_START, \" \");\n\t\t\t\t\tNotify(EMIT_LETTER, \"\");\n\t\t\t\t}\n\n\t\t\t\tsetTimeout(() =>\n\t\t\t\t{\n\t\t\t\t\tVoicePlayer.PreloadVoice(morseChar);\n\t\t\t\t\tTonePlayer.PlayPattern(morseChar);\n\t\t\t\t}, sleepTime);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tNotify(PATTERN_START, \"\");\n\t\t\t\tNotify(PATTERN_STOP, null);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction updateVolume(value: number): void\n\t{\n\t\tMasterGain.gain.setTargetAtTime(value, AudioCtx.currentTime, 0.01);\n\t}\n\n\tfunction startPlaying(): void\n\t{\n\t\tif (!T.NowPlaying)\n\t\t{\n\t\t\tNotify(SET_NOW_PLAYING, true);\n\t\t\tsetTimeout(playNextPattern, 500);\n\t\t}\n\t}\n\n\tfunction stopPlaying(): void\n\t{\n\t\tNotify(SET_NOW_PLAYING, false);\n\t}\n\n\tfunction patternComplete(char: Morse.Char): void\n\t{\n\t\tif (T.NowPlaying)\n\t\t{\n\t\t\tif (char == null)\n\t\t\t{\n\t\t\t\tplayNextPattern();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// playNextPattern() will be called by VOICE_DONE (which is\n\t\t\t\t// triggered whether the voice is currently enabled or not).\n\t\t\t\tVoicePlayer.PlayVoice(char);\n\t\t\t}\n\t\t}\n\t}\n\n\tListen(EMIT_VOICE_DONE, playNextPattern);\n\tListen(CMD_PAUSE, stopPlaying);\n\tListen(CMD_STOP, stopPlaying);\n\tListen(CMD_START, startPlaying);\n\tListen(PATTERN_STOP, patternComplete);\n\tListen(SET_VOLUME, updateVolume);\n}\n","/// <reference path=\"events.ts\"/>\n\nnamespace Routing\n{\n\tconst routes = {\n\t\t\"\": VIEW_HOME,\n\t\t\"#playing\": VIEW_PLAYING,\n\t\t\"#settings\": VIEW_SETTINGS,\n\t\t\"#stories\": VIEW_STORIES,\n\t\t\"#text\": VIEW_TEXT\n\t};\n\n\tfunction processHash()\n\t{\n\t\tconst hash = location.hash;\n\t\tif (routes[hash])\n\t\t\tNotify(routes[hash], null);\n\n\t\tif (hash === \"\" && location.href.indexOf(\"#\") > -1)\n\t\t\thistory.replaceState(\"\", document.title, window.location.pathname);\n\t}\n\n\twindow.addEventListener(\"hashchange\", processHash);\n\tdocument.addEventListener(\"DOMContentLoaded\", processHash);\n}\n","/// <reference path=\"events.ts\"/>\n\nnamespace LocalStorage\n{\n\tListen(UI_SPACING,\n\t\t(value: string) => localStorage.setItem(\"charSpacing\", value));\n\n\tListen(UI_LETTERS,\n\t\t(value: boolean) => localStorage.setItem(\"lettersEnabled\", value.toString()));\n\n\tListen(UI_NUMBERS,\n\t\t(value: boolean) => localStorage.setItem(\"numbersEnabled\", value.toString()));\n\n\tListen(UI_PITCH,\n\t\t(value: string) => localStorage.setItem(\"pitch\", value));\n\n\tListen(UI_SYMBOLS,\n\t\t(value: boolean) => localStorage.setItem(\"symbolsEnabled\", value.toString()));\n\n\tListen(UI_TEXT_BUFFER,\n\t\t(value: boolean) => localStorage.setItem(\"textBuffer\", value.toString()));\n\n\tListen(UI_VOICE,\n\t\t(value: boolean) => localStorage.setItem(\"voiceEnabled\", value.toString()));\n\n\tListen(UI_VOLUME,\n\t\t(value: string) => localStorage.setItem(\"volume\", value));\n\n\tListen(UI_WPM,\n\t\t(value: string) => localStorage.setItem(\"wpm\", value));\n}\n","/// <reference path=\"../events.ts\"/>\n/// <reference path=\"../morsetable.ts\"/>\n/// <reference path=\"../query.ts\"/>\n\nnamespace UI\n{\n\tconst homeBtn = Query<HTMLElement>(\".btn-home\");\n\tconst startBtns = QueryAll<HTMLElement>(\".btn-start\");\n\tconst startBtn = Query<HTMLButtonElement>(\".btn-start\");\n\tconst pauseBtn = Query<HTMLButtonElement>(\".btn-pause\");\n\tconst stopBtn = Query<HTMLButtonElement>(\".btn-stop\");\n\tconst letterElement = Query(\".letter\");\n\tconst outputBuffer = Query(\".outputBuffer\");\n\tconst storyLinks = QueryAll(\".story a\");\n\tconst patternEl = Query<HTMLElement>(\".view.playing .pattern\");\n\n\tlet playState = \"stopped\";\n\n\tpauseBtn.addEventListener(\"click\",\n\t\t() => Notify(CMD_PAUSE, null));\n\n\tfor (let i = 0; i < startBtns.length; ++i)\n\t{\n\t\tstartBtns[i].addEventListener(\"click\",\n\t\t\t() => Notify(CMD_START, null));\n\t}\n\n\tstopBtn.addEventListener(\"click\",\n\t\t() => Notify(CMD_STOP, null));\n\n\tfor (let i = 0; i < storyLinks.length; ++i)\n\t{\n\t\tconst storyLink = storyLinks[i];\n\t\tstoryLink.addEventListener(\"click\", (evt: MouseEvent) =>\n\t\t{\n\t\t\tevt.preventDefault();\n\t\t\tconst anchor = <HTMLAnchorElement>evt.target;\n\t\t\tconst href = anchor.href;\n\t\t\tNotify(CMD_STORY, href);\n\t\t});\n\t}\n\n\tListen(CMD_CLEAR_OUTPUT, () =>\n\t\toutputBuffer.innerHTML = \"\");\n\n\tListen(CMD_PAUSE, () =>\n\t{\n\t\tplayState = \"paused\";\n\t\tstartBtn.disabled = false;\n\t\tpauseBtn.disabled = true;\n\t\tstopBtn.disabled = true;\n\t});\n\n\tListen(CMD_START, () =>\n\t{\n\t\tif (AudioCtx.state === \"suspended\")\n\t\t\tAudioCtx.resume();\n\n\t\tplayState = \"started\";\n\t\tNotify(WATCH, null);\n\t\tstartBtn.disabled = true;\n\t\tpauseBtn.disabled = false;\n\t\tstopBtn.disabled = false;\n\t});\n\n\tListen(CMD_STOP, () =>\n\t{\n\t\tplayState = \"stopped\";\n\t\tlocation.hash = \"\";\n\t\toutputBuffer.innerHTML = \"\";\n\t\tletterElement.innerHTML = \"\";\n\t\tpatternEl.innerHTML = \"\";\n\t\tstartBtn.disabled = false;\n\t\tpauseBtn.disabled = true;\n\t\tstopBtn.disabled = true;\n\t});\n\n\tListen(EMIT_LETTER,\n\t\t(value: string) => letterElement.innerHTML = value);\n\n\tListen(EMIT_OUTPUT,\n\t\t(value: string) =>\n\t\t{\n\t\t\toutputBuffer.innerHTML += value;\n\t\t\toutputBuffer.scrollTop = outputBuffer.scrollHeight;\n\t\t});\n\n\tListen(PATTERN_START,\n\t\t(pattern: string) =>\n\t\t{\n\t\t\tfunction make(className: string): HTMLElement\n\t\t\t{\n\t\t\t\tconst el = document.createElement(\"span\");\n\t\t\t\tel.classList.add(\"element\");\n\t\t\t\tel.classList.add(className);\n\t\t\t\treturn el;\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < pattern.length; ++i)\n\t\t\t{\n\t\t\t\tlet el: HTMLElement;\n\n\t\t\t\tif (pattern[i] === \".\")\n\t\t\t\t\tel = make(\"dit\");\n\t\t\t\telse if (pattern[i] === \"-\")\n\t\t\t\t\tel = make(\"dah\");\n\t\t\t\telse if (pattern[i] === \" \")\n\t\t\t\t\tel = make(\"wordSpace\");\n\n\t\t\t\tpatternEl.appendChild(el);\n\t\t\t}\n\n\t\t\tpatternEl.appendChild(make(\"charSpace\"));\n\t\t});\n\n\tListen(PATTERN_STOP,\n\t\t(char: Morse.Char) =>\n\t\t{\n\t\t\tif (playState !== \"stopped\")\n\t\t\t{\n\t\t\t\toutputBuffer.innerHTML += char == null ? \" \" : char.name;\n\t\t\t\toutputBuffer.scrollTop = outputBuffer.scrollHeight;\n\t\t\t}\n\t\t});\n\n\tListen(WATCH,\n\t\t() => location.hash = \"#playing\");\n}\n","/// <reference path=\"../events.ts\"/>\n\nnamespace Settings {\n\tconst resetSettingsButton = QueryId(\"resetSettings\");\n\n\t// Settings text labels\n\tconst volumeText = Query<HTMLInputElement>(\".volumeText\");\n\tconst charWPMText = Query<HTMLInputElement>(\".charWPMText\");\n\tconst pitchText = Query<HTMLInputElement>(\".pitchText\");\n\tconst charSpacingText = Query<HTMLInputElement>(\".charSpacingText\");\n\n\t// Settings inputs\n\texport const userSet = {\n\t\tvolume: QueryId<HTMLInputElement>(\"volume\"),\n\t\tcharWPM: QueryId<HTMLInputElement>(\"charWPM\"),\n\t\tpitch: QueryId<HTMLInputElement>(\"pitch\"),\n\t\tcharSpacing: QueryId<HTMLInputElement>(\"charSpacing\"),\n\t\tvoiceEnabled: QueryId<HTMLInputElement>(\"voiceEnabled\"),\n\t\tpasteTextBox: QueryId<HTMLTextAreaElement>(\"pasteText\"),\n\t\tlettersEnabled: QueryId<HTMLInputElement>(\"lettersEnabled\"),\n\t\tnumbersEnabled: QueryId<HTMLInputElement>(\"numbersEnabled\"),\n\t\tsymbolsEnabled: QueryId<HTMLInputElement>(\"symbolsEnabled\")\n\t};\n\n\tconst defaults = {\n\t\tcharSpacing: 8,\n\t\tlettersEnabled: true,\n\t\tnumbersEnabled: false,\n\t\tpitch: 650,\n\t\tsymbolsEnabled: false,\n\t\tvoiceEnabled: true,\n\t\tvolume: 0.40,\n\t\twpm: 10\n\t};\n\n\tfunction Adjust(name: string, value: any) {\n\t\tNotify(name.replace(/^set_/, \"ui_\"), value.toString());\n\t\tNotify(name, value);\n\t}\n\n\tuserSet.volume.addEventListener(\"input\",\n\t\t() => Adjust(SET_VOLUME, parseFloat(userSet.volume.value)));\n\n\tuserSet.charWPM.addEventListener(\"input\",\n\t\t() => Adjust(SET_WPM, parseInt(userSet.charWPM.value)));\n\n\tuserSet.charSpacing.addEventListener(\"input\",\n\t\t() => Adjust(SET_SPACING, parseInt(userSet.charSpacing.value)));\n\n\tuserSet.pitch.addEventListener(\"input\",\n\t\t() => Adjust(SET_PITCH, parseInt(userSet.pitch.value)));\n\n\tuserSet.pasteTextBox.addEventListener(\"input\",\n\t\t() => Adjust(SET_TEXT_BUFFER, userSet.pasteTextBox.value));\n\n\tuserSet.voiceEnabled.addEventListener(\"change\",\n\t\t() => Adjust(SET_VOICE, userSet.voiceEnabled.checked));\n\n\tuserSet.lettersEnabled.addEventListener(\"change\",\n\t\t() => Adjust(SET_LETTERS, userSet.lettersEnabled.checked));\n\n\tuserSet.numbersEnabled.addEventListener(\"change\",\n\t\t() => Adjust(SET_NUMBERS, userSet.numbersEnabled.checked));\n\n\tuserSet.symbolsEnabled.addEventListener(\"change\",\n\t\t() => Adjust(SET_SYMBOLS, userSet.symbolsEnabled.checked));\n\n\tresetSettingsButton.addEventListener(\"click\",\n\t\t() => {\n\t\t\tAdjust(SET_SPACING, defaults.charSpacing);\n\t\t\tAdjust(SET_LETTERS, defaults.lettersEnabled);\n\t\t\tAdjust(SET_NUMBERS, defaults.numbersEnabled);\n\t\t\tAdjust(SET_PITCH, defaults.pitch);\n\t\t\tAdjust(SET_SYMBOLS, defaults.symbolsEnabled);\n\t\t\tAdjust(SET_VOICE, defaults.voiceEnabled);\n\t\t\tAdjust(SET_VOLUME, defaults.volume);\n\t\t\tAdjust(SET_WPM, defaults.wpm);\n\t\t});\n\n\t// Update UI in response to settings changes\n\n\tListen(SET_SPACING,\n\t\t(value: number) => {\n\t\t\tcharSpacingText.value = value.toString();\n\t\t\tuserSet.charSpacing.value = value.toString();\n\t\t});\n\n\tListen(SET_LETTERS,\n\t\t(value: boolean) => userSet.lettersEnabled.checked = value);\n\n\tListen(SET_NUMBERS,\n\t\t(value: boolean) => userSet.numbersEnabled.checked = value);\n\n\tListen(SET_PITCH,\n\t\t(value: number) => {\n\t\t\tpitchText.value = value.toString();\n\t\t\tuserSet.pitch.value = value.toString();\n\t\t});\n\n\tListen(SET_SYMBOLS,\n\t\t(value: boolean) => userSet.symbolsEnabled.checked = value);\n\n\tListen(SET_TEXT_BUFFER,\n\t\t(value: string) => userSet.pasteTextBox.value = value);\n\n\tListen(SET_VOICE,\n\t\t(value: boolean) => userSet.voiceEnabled.checked = value);\n\n\tListen(SET_VOLUME,\n\t\t(value: number) => {\n\t\t\tvolumeText.value = Math.floor(value * 100).toString();\n\t\t\tuserSet.volume.value = value.toString();\n\t\t});\n\n\tListen(SET_WPM,\n\t\t(value: number) => {\n\t\t\tcharWPMText.value = value.toString();\n\t\t\tuserSet.charWPM.value = value.toString();\n\t\t});\n\n\tdocument.addEventListener(\"DOMContentLoaded\", () => {\n\t\t// Trigger events to initialize state\n\t\tNotify(SET_VOLUME, localStorage.getItem(\"volume\") || defaults.volume);\n\t\tNotify(SET_WPM, localStorage.getItem(\"wpm\") || defaults.wpm);\n\t\tNotify(SET_PITCH, localStorage.getItem(\"pitch\") || defaults.pitch);\n\t\tNotify(SET_SPACING, localStorage.getItem(\"charSpacing\") || defaults.charSpacing);\n\n\t\tconst voiceEnabledStorage = localStorage.getItem(\"voiceEnabled\");\n\t\tif (voiceEnabledStorage == null)\n\t\t\tNotify(SET_VOICE, defaults.voiceEnabled);\n\t\telse\n\t\t\tNotify(SET_VOICE, voiceEnabledStorage === \"true\");\n\n\t\tconst lettersEnabledStorage = localStorage.getItem(\"lettersEnabled\");\n\t\tif (lettersEnabledStorage == null)\n\t\t\tNotify(SET_LETTERS, defaults.lettersEnabled);\n\t\telse\n\t\t\tNotify(SET_LETTERS, lettersEnabledStorage === \"true\");\n\n\t\tconst numbersEnabledStorage = localStorage.getItem(\"numbersEnabled\");\n\t\tif (numbersEnabledStorage == null)\n\t\t\tNotify(SET_NUMBERS, defaults.numbersEnabled);\n\t\telse\n\t\t\tNotify(SET_NUMBERS, numbersEnabledStorage === \"true\");\n\n\t\tconst symbolsEnabledStorage = localStorage.getItem(\"symbolsEnabled\");\n\t\tif (symbolsEnabledStorage == null)\n\t\t\tNotify(SET_SYMBOLS, defaults.symbolsEnabled);\n\t\telse\n\t\t\tNotify(SET_SYMBOLS, symbolsEnabledStorage === \"true\");\n\t});\n}\n","/// <reference path=\"../events.ts\"/>\n/// <reference path=\"../query.ts\"/>\n\nnamespace Views {\n\tfunction view(selector: string, menuItem: Element) {\n\t\tconst views = QueryAll(\".view\");\n\n\t\tfor (let i = 0; i < views.length; ++i) {\n\t\t\tconst view = views[i];\n\t\t\tif (!view.classList.contains(\"disabled\"))\n\t\t\t\tview.classList.add(\"disabled\");\n\t\t}\n\n\t\tconst viewToShow = Query(selector);\n\t\tviewToShow.classList.remove(\"disabled\");\n\n\t\t// Highlight the menu item\n\t\tconst controls = QueryAll(\".menu .btn\");\n\t\tfor (let i = 0; i < controls.length; ++i) {\n\t\t\tconst control = controls[i];\n\t\t\tcontrol.classList.remove(\"active\");\n\t\t}\n\t\tmenuItem.classList.add(\"active\");\n\t}\n\n\tListen(VIEW_HOME,\n\t\t() => view(\".home\", Query(\".btn-home\")));\n\n\tListen(VIEW_SETTINGS,\n\t\t() => view(\".settings\", Query(\".btn-settings\")));\n\n\tListen(VIEW_PLAYING,\n\t\t() => view(\".playing\", Query(\".btn-playing\")));\n\n\tListen(VIEW_STORIES,\n\t\t() => view(\".stories\", Query(\".btn-stories\")));\n\n\tListen(VIEW_TEXT,\n\t\t() => view(\".paste\", Query(\".btn-paste\")));\n}\n"]}