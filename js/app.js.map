{"version":3,"sources":["audiocontext.ts","events.ts","fullscreen.ts","morsetable.ts","player.ts","query.ts","routing.ts","text.ts","toneplayer.ts","voiceplayer.ts","ui/controls.ts","ui/settings.ts","ui/views.ts"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["const AudioCtx: AudioContext = new AudioContext();\n\n// Wire up audio\n\nconst MasterGain = AudioCtx.createGain();\nMasterGain.gain.value = 0.5;\nMasterGain.connect(AudioCtx.destination);\n\nconst VoiceGain = AudioCtx.createGain();\nVoiceGain.gain.value = 0.80;\nVoiceGain.connect(MasterGain);\n\nconst ToneGain = AudioCtx.createGain();\nToneGain.gain.value = 1;\nToneGain.connect(MasterGain);\n","function Notify(name: string, value: any)\n{\n\tdocument.dispatchEvent(new CustomEvent(name, { detail: value }));\n}\n\nfunction Listen<T>(name: string, handler: (value?: T) => any)\n{\n\tdocument.addEventListener(name, (evt: CustomEvent) => handler(evt.detail));\n}\n\nconst VIEW_HOME = \"view_home\";\nconst VIEW_SETTINGS = \"view_settings\";\nconst VIEW_PLAYING = \"view_player\";\nconst VIEW_STORIES = \"view_stories\";\nconst VIEW_TEXT = \"view_text\";\n","namespace FullScreen\n{\n\tconst fullScreenButton = Query(\".btn-fullscreen\");\n\tconst playingView = document.body.parentElement;\n\tconst controls = Query(\".controls\");\n\tconst menu = Query(\".menu\");\n\tconst sidebar = Query(\".sidebar\");\n\n\tlet isFullScreen = false;\n\tlet hideControlsInterval: number;\n\tlet lastActivity = Date.now();\n\tlet hideControlsMS = 2000;\n\tlet controlsVisible = false;\n\tlet cursorVisible = false;\n\n\tfunction exitFullScreen()\n\t{\n\t\tdocument.body.classList.remove(\"fullscreen\");\n\n\t\tif (document.exitFullscreen)\n\t\t\tdocument.exitFullscreen();\n\t\telse if (document[\"webkitExitFullscreen\"])\n\t\t\tdocument[\"webkitExitFullscreen\"]();\n\t\telse if (document[\"mozCancelFullScreen\"])\n\t\t\tdocument[\"mozCancelFullScreen\"]();\n\n\t\tclearInterval(hideControlsInterval);\n\t\tdocument.removeEventListener(\"mousemove\", markTime);\n\t}\n\n\tfunction enterFullScreen()\n\t{\n\t\tdocument.addEventListener(\"mousemove\", markTime);\n\t\thideControlsInterval = setInterval(hideOrReveal, 200);\n\n\t\tif (document.fullscreenEnabled)\n\t\t\tplayingView.requestFullscreen();\n\t\telse if (document[\"webkitFullscreenEnabled\"])\n\t\t\tplayingView[\"webkitRequestFullscreen\"]();\n\t\telse if (document[\"mozFullScreenEnabled\"])\n\t\t\tplayingView[\"mozRequestFullScreen\"]();\n\n\t\tdocument.body.classList.add(\"fullscreen\");\n\t}\n\n\tfunction toggleFullScreen()\n\t{\n\t\tif (isFullScreen)\n\t\t\texitFullScreen();\n\t\telse\n\t\t\tenterFullScreen();\n\t}\n\n\tfunction fullScreenChanged()\n\t{\n\t\tisFullScreen = !isFullScreen;\n\t\tfullScreenButton.textContent = isFullScreen ? \"Exit full screen\" : \"Full screen\";\n\t\tlastActivity = Date.now();\n\t}\n\n\tfunction markTime()\n\t{\n\t\tlastActivity = Date.now();\n\t}\n\n\tfunction hideOrReveal()\n\t{\n\t\tif (isFullScreen && Date.now() - lastActivity > hideControlsMS)\n\t\t{\n\t\t\thideControls();\n\t\t\thideCursor();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tshowControls();\n\t\t\tshowCursor();\n\t\t}\n\t}\n\n\tfunction hideCursor()\n\t{\n\t\tif (cursorVisible)\n\t\t\tplayingView.style.cursor = \"none\";\n\n\t\tcursorVisible = false;\n\t}\n\n\tfunction showCursor()\n\t{\n\t\tif (!cursorVisible)\n\t\t\tplayingView.style.cursor = \"default\";\n\n\t\tcursorVisible = true;\n\t}\n\n\tfunction hideControls()\n\t{\n\t\tif (controlsVisible)\n\t\t{\n\t\t\tfullScreenButton.classList.add(\"disabled\");\n\t\t\tcontrols.classList.add(\"disabled\");\n\t\t\tmenu.classList.add(\"disabled\");\n\t\t\tsidebar.classList.add(\"disabled\");\n\t\t}\n\n\t\tcontrolsVisible = false;\n\t}\n\n\tfunction showControls()\n\t{\n\t\tif (!controlsVisible)\n\t\t{\n\t\t\tfullScreenButton.classList.remove(\"disabled\");\n\t\t\tcontrols.classList.remove(\"disabled\");\n\t\t\tmenu.classList.remove(\"disabled\");\n\t\t\tsidebar.classList.remove(\"disabled\");\n\t\t}\n\n\t\tcontrolsVisible = true;\n\t}\n\n\texport function StopPlaying()\n\t{\n\t\tshowCursor();\n\t\tshowControls();\n\t\tif (isFullScreen)\n\t\t\texitFullScreen();\n\t}\n\n\texport function Initialize()\n\t{\n\t\tif (document.fullscreenEnabled)\n\t\t\tdocument.addEventListener(\"fullscreenchange\", fullScreenChanged);\n\t\telse if (document[\"webkitFullscreenEnabled\"])\n\t\t\tdocument.addEventListener(\"webkitfullscreenchange\", fullScreenChanged);\n\t\telse if (document[\"mozFullScreenEnabled\"])\n\t\t\tdocument.addEventListener(\"mozfullscreenchange\", fullScreenChanged);\n\n\t\tfullScreenButton.addEventListener(\"click\", toggleFullScreen);\n\t}\n}\n","namespace Morse\n{\n\texport interface Char\n\t{\n\t\tname: string;\n\t\tpattern: string;\n\t\tvoiceFileName?: string;\n\t\tvoiceAudioBuffer?: AudioBuffer;\n\t\ttoneAudioBuffer?: AudioBuffer;\n\t}\n\n\t// 0 1 2 3 4 5 6 7 8 9 A B C D E F G H I J K L M N O P Q R S T U V W X Y Z . ? ! , : ; ' - / ( ) @ = + \"\n\n\tconst spacePatterns: { [char: string]: Char } = {\n\t\t\"\": { name: \"\", pattern: \"\" },\n\t\t\" \": { name: \" \", pattern: \" \" },\n\t};\n\n\tconst letterPatterns: { [char: string]: Char } = {\n\t\t\"A\": { name: \"A\", pattern: \".-\" },\n\t\t\"B\": { name: \"B\", pattern: \"-...\" },\n\t\t\"C\": { name: \"C\", pattern: \"-.-.\" },\n\t\t\"D\": { name: \"D\", pattern: \"-..\" },\n\t\t\"E\": { name: \"E\", pattern: \".\" },\n\t\t\"F\": { name: \"F\", pattern: \"..-.\" },\n\t\t\"G\": { name: \"G\", pattern: \"--.\" },\n\t\t\"H\": { name: \"H\", pattern: \"....\" },\n\t\t\"I\": { name: \"I\", pattern: \"..\" },\n\t\t\"J\": { name: \"J\", pattern: \".---\" },\n\t\t\"K\": { name: \"K\", pattern: \"-.-\" },\n\t\t\"L\": { name: \"L\", pattern: \".-..\" },\n\t\t\"M\": { name: \"M\", pattern: \"--\" },\n\t\t\"N\": { name: \"N\", pattern: \"-.\" },\n\t\t\"O\": { name: \"O\", pattern: \"---\" },\n\t\t\"P\": { name: \"P\", pattern: \".--.\" },\n\t\t\"Q\": { name: \"Q\", pattern: \"--.-\" },\n\t\t\"R\": { name: \"R\", pattern: \".-.\" },\n\t\t\"S\": { name: \"S\", pattern: \"...\" },\n\t\t\"T\": { name: \"T\", pattern: \"-\" },\n\t\t\"U\": { name: \"U\", pattern: \"..-\" },\n\t\t\"V\": { name: \"V\", pattern: \"...-\" },\n\t\t\"W\": { name: \"W\", pattern: \".--\" },\n\t\t\"X\": { name: \"X\", pattern: \"-..-\" },\n\t\t\"Y\": { name: \"Y\", pattern: \"-.--\" },\n\t\t\"Z\": { name: \"Z\", pattern: \"--..\" }\n\t};\n\n\tconst numberPatterns: { [char: string]: Char } = {\n\t\t\"0\": { name: \"0\", pattern: \"-----\" },\n\t\t\"1\": { name: \"1\", pattern: \".----\" },\n\t\t\"2\": { name: \"2\", pattern: \"..---\" },\n\t\t\"3\": { name: \"3\", pattern: \"...--\" },\n\t\t\"4\": { name: \"4\", pattern: \"....-\" },\n\t\t\"5\": { name: \"5\", pattern: \".....\" },\n\t\t\"6\": { name: \"6\", pattern: \"-....\" },\n\t\t\"7\": { name: \"7\", pattern: \"--...\" },\n\t\t\"8\": { name: \"8\", pattern: \"---..\" },\n\t\t\"9\": { name: \"9\", pattern: \"----.\" }\n\t};\n\n\tconst symbolPatterns: { [char: string]: Char } = {\n\t\t\".\": { name: \".\", pattern: \".-.-.-\" },\n\t\t\"?\": { name: \"?\", pattern: \"..--..\" },\n\t\t\"!\": { name: \"!\", pattern: \"-.-.--\" },\n\t\t\",\": { name: \",\", pattern: \"--..--\" },\n\t\t\":\": { name: \":\", pattern: \"---...\" },\n\t\t\";\": { name: \";\", pattern: \"-.-.-.\" },\n\t\t\"'\": { name: \"'\", pattern: \".----.\" },\n\t\t\"-\": { name: \"-\", pattern: \"-....-\" },\n\t\t\"/\": { name: \"/\", pattern: \"-..-.\" },\n\t\t\"(\": { name: \"(\", pattern: \"-.--.\" },\n\t\t\")\": { name: \")\", pattern: \"-.--.-\" },\n\t\t\"@\": { name: \"@\", pattern: \".--.-.\" },\n\t\t\"=\": { name: \"=\", pattern: \"-...-\" },\n\t\t\"+\": { name: \"+\", pattern: \".-.-.\" },\n\t\t\"\\\"\": { name: \"\\\"\", pattern: \".-..-.\" }\n\t};\n\n\tconst symbolNames: { [char: string]: string } = {\n\t\t\".\": \"PERIOD\",\n\t\t\"?\": \"QUESTION\",\n\t\t\"!\": \"EXCLAMATION\",\n\t\t\",\": \"COMMA\",\n\t\t\":\": \"COLON\",\n\t\t\";\": \"SEMICOLON\",\n\t\t\"'\": \"APOSTROPHE\",\n\t\t\"-\": \"DASH\",\n\t\t\"/\": \"SLASH\",\n\t\t\"(\": \"OPEN_BRACKET\",\n\t\t\")\": \"CLOSE_BRACKET\",\n\t\t\"@\": \"AT\",\n\t\t\"=\": \"EQUALS\",\n\t\t\"+\": \"PLUS\",\n\t\t\"\\\"\": \"QUOTE\"\n\t};\n\n\tconst letters = Object.keys(letterPatterns);\n\n\tconst numbers = Object.keys(numberPatterns);\n\n\tconst symbols = Object.keys(symbolPatterns);\n\n\tlet lettersEnabled = true;\n\n\tlet numbersEnabled = false;\n\n\tlet symbolsEnabled = false;\n\n\texport function AllCharacters(): Char[]\n\t{\n\t\treturn letters.map(l => letterPatterns[l])\n\t\t\t.concat(numbers.map(n => numberPatterns[n]))\n\t\t\t.concat(symbols.map(s => symbolPatterns[s]));\n\t}\n\n\texport function RandomCharacter(): Char\n\t{\n\t\tlet chars = [];\n\n\t\tif (lettersEnabled)\n\t\t\tchars = chars.concat(letters);\n\n\t\tif (numbersEnabled)\n\t\t\tchars = chars.concat(numbers);\n\n\t\tif (symbolsEnabled)\n\t\t\tchars = chars.concat(symbols);\n\n\t\tif (chars.length > 0)\n\t\t{\n\t\t\tconst char = chars[Math.floor(Math.random() * chars.length)];\n\n\t\t\treturn letterPatterns[char] || numberPatterns[char] || symbolPatterns[char];\n\t\t}\n\n\t\treturn spacePatterns[\"\"];\n\t}\n\n\texport function GetCharacter(char: string): Char\n\t{\n\t\tchar = char.toUpperCase();\n\n\t\tlet found = letterPatterns[char];\n\t\tif (found)\n\t\t\treturn found;\n\n\t\tfound = numberPatterns[char];\n\t\tif (found)\n\t\t\treturn found;\n\n\t\tfound = symbolPatterns[char];\n\t\tif (found)\n\t\t\treturn found;\n\n\t\tif (char === \"\")\n\t\t\treturn spacePatterns[\"\"];\n\n\t\tif (char === \" \")\n\t\t\treturn spacePatterns[\" \"];\n\n\t\treturn undefined;\n\t}\n\n\texport function fileName(char: Char)\n\t{\n\t\tif (Object.keys(letterPatterns).indexOf(char.name) > -1\n\t\t\t|| Object.keys(numberPatterns).indexOf(char.name) > -1\n\t\t\t|| Object.keys(symbolNames).indexOf(char.name) > -1)\n\t\t{\n\n\t\t\tlet fileName = symbolNames[char.name];\n\n\t\t\tif (!fileName)\n\t\t\t\tfileName = char.name;\n\n\t\t\tfileName += \".mp3\";\n\n\t\t\treturn fileName;\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\texport function SetNumbers(value: boolean)\n\t{\n\t\tnumbersEnabled = value;\n\t}\n\n\texport function SetLetters(value: boolean)\n\t{\n\t\tlettersEnabled = value;\n\t}\n\n\texport function SetSymbols(value: boolean)\n\t{\n\t\tsymbolsEnabled = value;\n\t}\n}\n","namespace Player\n{\n\tlet nowPlaying: boolean;\n\n\texport function PlayNextPattern(): void\n\t{\n\t\tif (nowPlaying)\n\t\t{\n\t\t\t// Fetch a tuple containing the next character and any unplayable text before it (whitespace, etc).\n\t\t\tlet [text, morseChar] = TextLoader.Next() || [\" \", Morse.GetCharacter(\" \")];\n\n\t\t\tif (morseChar)\n\t\t\t{\n\t\t\t\tlet sleepTime = 0;\n\n\t\t\t\t// If there is unplayable text, send it to the output buffer and delay for one word-break.\n\t\t\t\tif (text !== morseChar.name)\n\t\t\t\t{\n\t\t\t\t\tUI.EmitOutput(text.substr(0, text.length - 1));\n\t\t\t\t\tUI.DrawPattern(\" \");\n\t\t\t\t\tUI.EmitCharacter(\"\");\n\t\t\t\t}\n\n\t\t\t\tVoicePlayer.PreloadVoice(morseChar);\n\t\t\t\tTonePlayer.PlayPattern(morseChar);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tUI.DrawPattern(\"\");\n\t\t\t\tPlayer.PatternComplete(null);\n\t\t\t\tUI.PatternComplete(null);\n\t\t\t}\n\t\t}\n\t}\n\n\texport function StartPlaying(): void\n\t{\n\t\tif (!nowPlaying)\n\t\t{\n\t\t\tnowPlaying = true;\n\t\t\tsetTimeout(PlayNextPattern, 500);\n\t\t\tUI.StartPlaying();\n\t\t}\n\t}\n\n\texport function StopPlaying(): void\n\t{\n\t\tnowPlaying = false;\n\t\tVoicePlayer.Cancel();\n\t\tTonePlayer.StopPlaying();\n\t}\n\n\texport function PatternComplete(char: Morse.Char): void\n\t{\n\t\tif (nowPlaying)\n\t\t{\n\t\t\t// PlayNextPattern() will be called by VOICE_DONE (which is\n\t\t\t// triggered whether the voice is currently enabled or not).\n\t\t\tVoicePlayer.PlayVoice(char);\n\t\t}\n\t}\n}\n","function Query<T extends Element>(selector: string, element?: Element): T\n{\n\treturn <T>(element || document).querySelector(selector);\n}\n\nfunction QueryAll<T extends Element>(selector: string, element?: Element): NodeListOf<T>\n{\n\treturn <NodeListOf<T>>(element || document).querySelectorAll(selector);\n}\n\nfunction QueryId<T extends HTMLElement>(id: string): T\n{\n\treturn <T>document.getElementById(id);\n}\n","namespace Routing\n{\n\tconst routes = {\n\t\t\"\": VIEW_HOME,\n\t\t\"#playing\": VIEW_PLAYING,\n\t\t\"#settings\": VIEW_SETTINGS,\n\t\t\"#stories\": VIEW_STORIES,\n\t\t\"#text\": VIEW_TEXT\n\t};\n\n\tfunction processHash()\n\t{\n\t\tconst hash = location.hash;\n\t\tif (routes[hash])\n\t\t\tNotify(routes[hash], null);\n\n\t\tif (hash === \"\" && location.href.indexOf(\"#\") > -1)\n\t\t\thistory.replaceState(\"\", document.title, window.location.pathname);\n\t}\n\n\twindow.addEventListener(\"hashchange\", processHash);\n\tdocument.addEventListener(\"DOMContentLoaded\", processHash);\n}\n","namespace TextLoader\n{\n\tlet textBuffer = \"\";\n\tlet textBufferIndex = -1;\n\n\texport function ResetPosition()\n\t{\n\t\ttextBufferIndex = textBuffer.length > 0 ? 0 : -1;\n\t}\n\n\texport function SetTextBuffer(text: string)\n\t{\n\t\tUI.StopPlaying();\n\t\tUI.ClearOutput();\n\t\ttextBuffer = text.toUpperCase().trim() + \"\\n\";\n\t\tResetPosition();\n\t}\n\n\texport function LoadBook(href: string): void\n\t{\n\t\tPlayer.StopPlaying();\n\t\tfetch(href, { method: \"GET\" }).then(response =>\n\t\t\tresponse.text().then(value =>\n\t\t\t{\n\t\t\t\tUI.playState = \"stopped\";\n\t\t\t\tSettings.SetTextBuffer(value);\n\t\t\t\tPlayer.StartPlaying();\n\t\t\t}));\n\t}\n\n\texport function Next(): [string, Morse.Char]\n\t{\n\t\tif (textBuffer.length > 0)\n\t\t{\n\t\t\tconst startingIndex = textBufferIndex;\n\t\t\tlet text = \"\";\n\n\t\t\tdo\n\t\t\t{\n\t\t\t\ttext += textBuffer[textBufferIndex];\n\t\t\t\tconst morseChar = Morse.GetCharacter(textBuffer[textBufferIndex]);\n\n\t\t\t\t// Increment and wrap around if necessary\n\t\t\t\t++textBufferIndex;\n\t\t\t\tif (textBufferIndex === textBuffer.length)\n\t\t\t\t\ttextBufferIndex = 0;\n\n\t\t\t\tif (morseChar)\n\t\t\t\t\treturn [text, morseChar];\n\t\t\t}\n\t\t\twhile (textBufferIndex !== startingIndex);\n\n\t\t\treturn [\"\", null];\n\t\t}\n\n\t\tconst char = Morse.RandomCharacter();\n\n\t\treturn [char.name, char];\n\t}\n}\n","namespace TonePlayer\n{\n\tconst ditUnits = 1;\n\tconst dahUnits = 3;\n\tconst sampleRate = 48000;\n\n\tlet ditBuffer: AudioBuffer;\n\tlet dahBuffer: AudioBuffer;\n\tlet charSpaceBuffer: AudioBuffer;\n\tlet wordSpaceBuffer: AudioBuffer;\n\tlet currentBufferSource: AudioBufferSourceNode;\n\tlet ramp = 0.01;\n\tlet frequency = 650;\n\tlet charSpacing: number = 2;\n\tlet unitTime: number;\n\n\tfunction addToneToBuffer(units: number, samplesPerUnit: number, data: Float32Array, initialSample: number): void\n\t{\n\t\tconst omega = 2 * Math.PI * frequency / sampleRate;\n\n\t\t// Number of audio samples in the ramp up/down periods.\n\t\tconst rampSamples = Math.min(Math.ceil(ramp * sampleRate), samplesPerUnit);\n\n\t\t// Number of samples containing audio. Ramp-up is included in the \"on\" time, but ramp-down is appended.\n\t\tconst soundSamples = Math.ceil(samplesPerUnit * units);\n\n\t\t// Ramp up\n\t\tfor (let t = initialSample, rampPos = 0; t < initialSample + rampSamples; ++t, ++rampPos)\n\t\t{\n\t\t\tdata[t] = Math.sin(omega * t) * (rampPos / rampSamples);\n\t\t}\n\n\t\t// Main sine wave\n\t\tfor (let t = initialSample + rampSamples; t < initialSample + soundSamples - rampSamples; ++t)\n\t\t{\n\t\t\tdata[t] = Math.sin(omega * t);\n\t\t}\n\n\t\t// Ramp down\n\t\tfor (let t = initialSample + soundSamples - rampSamples, rampPos = rampSamples; t < initialSample + soundSamples; ++t, --rampPos)\n\t\t{\n\t\t\tdata[t] = Math.sin(omega * t) * (rampPos / rampSamples);\n\t\t}\n\t}\n\n\t// Normally dit and dah are 10 and 1110 in binary, which are 2 and 4 units.\n\tfunction countUnitsInPattern(pattern: string): number\n\t{\n\t\tlet total = 0;\n\n\t\tfor (let i = 0; i < pattern.length; ++i)\n\t\t{\n\t\t\ttotal += (pattern[i] === \".\" ? ditUnits : dahUnits) + ditUnits;\n\t\t}\n\n\t\treturn total;\n\t}\n\n\tfunction createCharacterBuffer(char: Morse.Char): AudioBuffer\n\t{\n\t\tconst pattern = char.pattern;\n\n\t\t// Number of dit-length units in the pattern.\n\t\tconst units = countUnitsInPattern(pattern);\n\n\t\t// Number of audio samples per Morse code unit of time.\n\t\tconst samplesPerUnit = Math.ceil(unitTime * sampleRate);\n\n\t\t// Number of audio samples in the ramp up/down periods.\n\t\tconst rampSamples = Math.min(Math.ceil(ramp * sampleRate), samplesPerUnit);\n\n\t\t// Number of samples containing audio. Ramp-up is included in the \"on\" time, but ramp-down is appended.\n\t\tconst soundSamples = Math.ceil(samplesPerUnit * units);\n\n\t\t// Total samples in the clip. This is the \"on\" time + ramp-down time + any remaining silence.\n\t\tconst totalSamples = Math.ceil(samplesPerUnit * units + (samplesPerUnit * charSpacing));\n\n\t\tconst buffer = AudioCtx.createBuffer(1, totalSamples, sampleRate);\n\n\t\tconst data = buffer.getChannelData(0);\n\n\t\tlet pos = 0;\n\n\t\tfor (let i = 0; i < pattern.length; ++i)\n\t\t{\n\t\t\tswitch (pattern[i])\n\t\t\t{\n\t\t\t\tcase \".\":\n\t\t\t\t\taddToneToBuffer(ditUnits, samplesPerUnit, data, pos);\n\t\t\t\t\tpos += samplesPerUnit * (ditUnits + ditUnits);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"-\":\n\t\t\t\t\taddToneToBuffer(dahUnits, samplesPerUnit, data, pos);\n\t\t\t\t\tpos += samplesPerUnit * (dahUnits + ditUnits);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn buffer;\n\t}\n\n\texport function InitializeBuffers()\n\t{\n\t\tconst allCharacters = Morse.AllCharacters();\n\n\t\tfor (let i = 0; i < allCharacters.length; ++i)\n\t\t{\n\t\t\tconst char = allCharacters[i];\n\t\t\tconst buffer = createCharacterBuffer(char);\n\n\t\t\tchar.toneAudioBuffer = buffer;\n\t\t}\n\n\t\tconst emptyChar = Morse.GetCharacter(\"\");\n\t\tconst spaceChar = Morse.GetCharacter(\" \");\n\t\tconst charSpaceTime = unitTime * sampleRate * charSpacing;\n\n\t\temptyChar.toneAudioBuffer = AudioCtx.createBuffer(1, charSpaceTime, sampleRate);\n\t\tspaceChar.toneAudioBuffer = AudioCtx.createBuffer(1, charSpaceTime * 3, sampleRate);\n\t}\n\n\texport function SetFrequency(value: number)\n\t{\n\t\tfrequency = value;\n\t\tInitializeBuffers();\n\t}\n\n\texport function SetCharSpacing(value: number)\n\t{\n\t\tcharSpacing = value;\n\t\tInitializeBuffers();\n\t}\n\n\t// With 60 seconds per minute and 50 units in \"PARIS\":\n\t//     UnitTime in seconds = 60 / (WPM * 50)\n\t// This simplifies to 1.2 / WPM.\n\texport function SetWpm(value: number)\n\t{\n\t\tunitTime = 1.2 / value;\n\t\tInitializeBuffers();\n\t}\n\n\texport function StopPlaying()\n\t{\n\t\tif (currentBufferSource)\n\t\t\tcurrentBufferSource.stop();\n\t}\n\n\texport function PlayPattern(char: Morse.Char): void\n\t{\n\t\tUI.EmitCharacter(char.name);\n\t\tUI.DrawPattern(char.pattern);\n\n\t\tcurrentBufferSource = AudioCtx.createBufferSource();\n\t\tcurrentBufferSource.connect(ToneGain);\n\t\tcurrentBufferSource.buffer = char.toneAudioBuffer;\n\t\tcurrentBufferSource.addEventListener(\"ended\", () =>\n\t\t{\n\t\t\tUI.PatternComplete(char);\n\t\t\tPlayer.PatternComplete(char);\n\t\t});\n\t\tcurrentBufferSource.start();\n\t}\n}\n","namespace VoicePlayer\n{\n\t// For caching audio files as they're loaded\n\tconst audioBuffers: { [char: string]: AudioBuffer } = {};\n\n\tlet loading: { [_: string]: boolean } = {};\n\tlet loaded: { [_: string]: boolean } = {};\n\tlet playWhenDone = false;\n\tlet enabled = false;\n\n\tfunction voiceLoaded(char: Morse.Char): void\n\t{\n\t\tconst playNow = playWhenDone;\n\t\tplayWhenDone = false;\n\n\t\tif (playNow)\n\t\t\tPlayVoice(char);\n\t}\n\n\tfunction loadVoice(char: Morse.Char): void\n\t{\n\t\tif (loaded[char.name])\n\t\t\tvoiceLoaded(char);\n\t\telse\n\t\t{\n\t\t\tloading[char.name] = true;\n\t\t\tfetch(\"/snd/\" + Morse.fileName(char), { method: \"GET\" })\n\t\t\t\t.then(response =>\n\t\t\t\t{\n\t\t\t\t\tif (response.status === 200)\n\t\t\t\t\t\tresponse.arrayBuffer()\n\t\t\t\t\t\t\t.then(arrayBuffer =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tAudioCtx.decodeAudioData(\n\t\t\t\t\t\t\t\t\tarrayBuffer,\n\t\t\t\t\t\t\t\t\tfunction (audioBuffer: AudioBuffer)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\taudioBuffers[char.name] = audioBuffer;\n\t\t\t\t\t\t\t\t\t\tloading[char.name] = false;\n\t\t\t\t\t\t\t\t\t\tloaded[char.name] = true;\n\n\t\t\t\t\t\t\t\t\t\tvoiceLoaded(char);\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t(err: DOMException) => console.error(\"Error decoding audio source: \", err));\n\t\t\t\t\t\t\t});\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tconsole.error(\"Failed to load voice for char: \", char);\n\t\t\t\t\t\tloading[char.name] = false;\n\t\t\t\t\t\tplayWhenDone = false;\n\t\t\t\t\t\tPlayer.PlayNextPattern();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(reason => console.error(reason));\n\t\t}\n\t}\n\n\texport function SetEnabled(value: boolean)\n\t{\n\t\tenabled = value;\n\t}\n\n\texport function Cancel()\n\t{\n\t\tplayWhenDone = false;\n\t}\n\n\texport function PreloadVoice(char: Morse.Char): void\n\t{\n\t\tif (enabled && !loaded[char.name] && loading[char.name])\n\t\t\tloadVoice(char);\n\t}\n\n\texport function PlayVoice(char: Morse.Char): void\n\t{\n\t\tif (!enabled || char == null || Morse.fileName(char) === undefined)\n\t\t\tPlayer.PlayNextPattern();\n\t\telse if (loading[char.name])\n\t\t\tplayWhenDone = true;\n\t\telse if (!loaded[char.name])\n\t\t{\n\t\t\tplayWhenDone = true;\n\t\t\tloadVoice(char);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst buffer = audioBuffers[char.name];\n\t\t\tconst audioSource = AudioCtx.createBufferSource();\n\t\t\taudioSource.addEventListener(\"ended\", Player.PlayNextPattern);\n\t\t\taudioSource.buffer = buffer;\n\t\t\taudioSource.connect(VoiceGain);\n\t\t\taudioSource.start(0);\n\t\t}\n\t}\n}\n","namespace UI\n{\n\tconst homeBtn = Query<HTMLElement>(\".btn-home\");\n\tconst startBtns = QueryAll<HTMLElement>(\".btn-start\");\n\tconst startBtn = Query<HTMLButtonElement>(\".btn-start\");\n\tconst pauseBtn = Query<HTMLButtonElement>(\".btn-pause\");\n\tconst stopBtn = Query<HTMLButtonElement>(\".btn-stop\");\n\tconst gearBtn = Query<HTMLButtonElement>(\".btn-gear\");\n\tconst letterElement = Query(\".letter\");\n\tconst outputBuffer = Query(\".outputBuffer\");\n\tconst storyLinks = QueryAll(\".story a\");\n\tconst patternEl = Query<HTMLElement>(\".view.playing .pattern\");\n\n\texport let playState = \"stopped\";\n\n\tfor (let i = 0; i < startBtns.length; ++i)\n\t{\n\t\tstartBtns[i].addEventListener(\"click\", () => Player.StartPlaying());\n\t}\n\n\tpauseBtn.addEventListener(\"click\", () => UI.PausePlaying());\n\n\tstopBtn.addEventListener(\"click\", () => UI.StopPlaying());\n\n\tgearBtn.addEventListener(\"click\", () => location.hash = \"settings\");\n\n\tfor (let i = 0; i < storyLinks.length; ++i)\n\t{\n\t\tconst storyLink = storyLinks[i];\n\t\tstoryLink.addEventListener(\"click\", (evt: MouseEvent) =>\n\t\t{\n\t\t\tevt.preventDefault();\n\t\t\tconst anchor = <HTMLAnchorElement>evt.target;\n\t\t\tconst href = anchor.href;\n\t\t\tTextLoader.LoadBook(href);\n\t\t});\n\t}\n\n\texport function ClearOutput()\n\t{\n\t\toutputBuffer.innerHTML = \"\";\n\t}\n\n\texport function StartPlaying()\n\t{\n\t\tif (AudioCtx.state === \"suspended\")\n\t\t\tAudioCtx.resume();\n\n\t\tstartBtn.disabled = true;\n\t\tpauseBtn.disabled = false;\n\t\tstopBtn.disabled = false;\n\t\tstartBtn.style.display = \"none\";\n\t\tpauseBtn.style.display = \"initial\";\n\t\tplayState = \"started\";\n\t\tlocation.hash = \"#playing\";\n\t}\n\n\texport function PausePlaying()\n\t{\n\t\tplayState = \"paused\";\n\t\tstartBtn.disabled = false;\n\t\tpauseBtn.disabled = true;\n\t\tstopBtn.disabled = false;\n\t\tpauseBtn.style.display = \"none\";\n\t\tstartBtn.style.display = \"initial\";\n\t\tPlayer.StopPlaying();\n\t}\n\n\texport function StopPlaying()\n\t{\n\t\tplayState = \"stopped\";\n\t\toutputBuffer.innerHTML = \"\";\n\t\tletterElement.innerHTML = \"\";\n\t\tpatternEl.innerHTML = \"\";\n\t\tstartBtn.disabled = false;\n\t\tpauseBtn.disabled = true;\n\t\tstopBtn.disabled = true;\n\t\tpauseBtn.style.display = \"none\";\n\t\tstartBtn.style.display = \"initial\";\n\t\tPlayer.StopPlaying();\n\t\tFullScreen.StopPlaying();\n\t\tTextLoader.ResetPosition();\n\t}\n\n\texport function EmitCharacter(char: string)\n\t{\n\t\tletterElement.innerHTML = char;\n\t}\n\n\texport function EmitOutput(value: string)\n\t{\n\t\toutputBuffer.innerHTML += value;\n\t\toutputBuffer.scrollTop = outputBuffer.scrollHeight;\n\t}\n\n\texport function DrawPattern(pattern: string)\n\t{\n\t\tfunction make(className: string): HTMLElement\n\t\t{\n\t\t\tconst el = document.createElement(\"span\");\n\t\t\tel.classList.add(\"element\");\n\t\t\tel.classList.add(className);\n\t\t\treturn el;\n\t\t}\n\n\t\tpatternEl.appendChild(make(\"charSpace\"));\n\n\t\tfor (let i = 0; i < pattern.length; ++i)\n\t\t{\n\t\t\tlet el: HTMLElement;\n\n\t\t\tif (pattern[i] === \".\")\n\t\t\t\tel = make(\"dit\");\n\t\t\telse if (pattern[i] === \"-\")\n\t\t\t\tel = make(\"dah\");\n\t\t\telse if (pattern[i] === \" \")\n\t\t\t\tel = make(\"wordSpace\");\n\n\t\t\tpatternEl.appendChild(el);\n\t\t}\n\t}\n\n\texport function PatternComplete(char: Morse.Char)\n\t{\n\t\tif (playState !== \"stopped\")\n\t\t{\n\t\t\toutputBuffer.innerHTML += char == null ? \" \" : char.name;\n\t\t\toutputBuffer.scrollTop = outputBuffer.scrollHeight;\n\t\t}\n\t}\n}\n","namespace Settings\n{\n\tconst resetSettingsButton = QueryId(\"resetSettings\");\n\n\t// Settings text labels\n\tconst volumeText = Query<HTMLInputElement>(\".volumeText\");\n\tconst charWPMText = Query<HTMLInputElement>(\".charWPMText\");\n\tconst pitchText = Query<HTMLInputElement>(\".pitchText\");\n\tconst charSpacingText = Query<HTMLInputElement>(\".charSpacingText\");\n\n\t// Settings inputs\n\tconst settingsUI = {\n\t\tvolume: QueryId<HTMLInputElement>(\"volume\"),\n\t\tcharWPM: QueryId<HTMLInputElement>(\"charWPM\"),\n\t\tpitch: QueryId<HTMLInputElement>(\"pitch\"),\n\t\tcharSpacing: QueryId<HTMLInputElement>(\"charSpacing\"),\n\t\tvoiceEnabled: QueryId<HTMLInputElement>(\"voiceEnabled\"),\n\t\tpasteTextBox: QueryId<HTMLTextAreaElement>(\"pasteText\"),\n\t\tlettersEnabled: QueryId<HTMLInputElement>(\"lettersEnabled\"),\n\t\tnumbersEnabled: QueryId<HTMLInputElement>(\"numbersEnabled\"),\n\t\tsymbolsEnabled: QueryId<HTMLInputElement>(\"symbolsEnabled\")\n\t};\n\n\tconst defaults = {\n\t\tcharSpacing: 2,\n\t\tlettersEnabled: true,\n\t\tnumbersEnabled: false,\n\t\tpitch: 650,\n\t\tsymbolsEnabled: false,\n\t\tvoiceEnabled: true,\n\t\tvolume: 0.40,\n\t\twpm: 10\n\t};\n\n\tsettingsUI.volume.addEventListener(\"input\", () =>\n\t{\n\t\tconst value = parseFloat(settingsUI.volume.value);\n\t\tlocalStorage.setItem(\"volume\", value.toString());\n\t\tsetVolume(value);\n\t});\n\n\tsettingsUI.charWPM.addEventListener(\"input\", () =>\n\t{\n\t\tconst value = parseInt(settingsUI.charWPM.value);\n\t\tlocalStorage.setItem(\"wpm\", value.toString());\n\t\tsetWpm(value);\n\t});\n\n\tsettingsUI.charSpacing.addEventListener(\"input\", () =>\n\t{\n\t\tconst value = parseInt(settingsUI.charSpacing.value);\n\t\tlocalStorage.setItem(\"charSpacing\", value.toString());\n\t\tsetCharSpacing(value);\n\t});\n\n\tsettingsUI.pitch.addEventListener(\"input\", () =>\n\t{\n\t\tconst value = parseInt(settingsUI.pitch.value);\n\t\tlocalStorage.setItem(\"pitch\", value.toString());\n\t\tsetPitch(value);\n\t});\n\n\tsettingsUI.pasteTextBox.addEventListener(\"input\", () =>\n\t{\n\t\tconst value = settingsUI.pasteTextBox.value;\n\t\tlocalStorage.setItem(\"textBuffer\", value.toString());\n\t\tSetTextBuffer(value);\n\t});\n\n\tsettingsUI.voiceEnabled.addEventListener(\"change\", () =>\n\t{\n\t\tconst value = settingsUI.voiceEnabled.checked;\n\t\tlocalStorage.setItem(\"voiceEnabled\", value.toString());\n\t\tVoicePlayer.SetEnabled(value);\n\t});\n\n\tsettingsUI.lettersEnabled.addEventListener(\"change\", () =>\n\t{\n\t\tlocalStorage.setItem(\"lettersEnabled\", settingsUI.lettersEnabled.checked.toString());\n\t\tMorse.SetLetters(settingsUI.lettersEnabled.checked);\n\t\tsettingsUI.lettersEnabled.checked = settingsUI.lettersEnabled.checked;\n\t});\n\n\tsettingsUI.numbersEnabled.addEventListener(\"change\", () =>\n\t{\n\t\tconst numbersEnabled = settingsUI.numbersEnabled.checked;\n\t\tlocalStorage.setItem(\"numbersEnabled\", numbersEnabled.toString());\n\t\tsetNumbersEnabled(numbersEnabled);\n\t});\n\n\tsettingsUI.symbolsEnabled.addEventListener(\"change\", () =>\n\t{\n\t\tlocalStorage.setItem(\"symbolsEnabled\", settingsUI.symbolsEnabled.checked.toString());\n\t\tsettingsUI.symbolsEnabled.checked = settingsUI.symbolsEnabled.checked;\n\t\tMorse.SetSymbols(settingsUI.symbolsEnabled.checked);\n\t});\n\n\tresetSettingsButton.addEventListener(\"click\", () =>\n\t{\n\t\tlocalStorage.setItem(\"charSpacing\", defaults.charSpacing.toString());\n\t\tsetCharSpacing(defaults.charSpacing);\n\n\t\tlocalStorage.setItem(\"lettersEnabled\", defaults.lettersEnabled.toString());\n\t\tsetLettersEnabled(defaults.lettersEnabled);\n\n\t\tlocalStorage.setItem(\"numbersEnabled\", defaults.numbersEnabled.toString());\n\t\tsetNumbersEnabled(defaults.numbersEnabled);\n\n\t\tlocalStorage.setItem(\"pitch\", defaults.pitch.toString());\n\t\tsetPitch(defaults.pitch);\n\n\t\tlocalStorage.setItem(\"symbolsEnabled\", defaults.symbolsEnabled.toString());\n\t\tsetSymbolsEnabled(defaults.symbolsEnabled);\n\n\t\tlocalStorage.setItem(\"voiceEnabled\", defaults.voiceEnabled.toString());\n\t\tsetVoiceEnabled(defaults.voiceEnabled);\n\n\t\tlocalStorage.setItem(\"volume\", defaults.volume.toString());\n\t\tsetVolume(defaults.volume);\n\n\t\tlocalStorage.setItem(\"wpm\", defaults.wpm.toString());\n\t\tsetWpm(defaults.wpm);\n\t});\n\n\texport function SetTextBuffer(value: string)\n\t{\n\t\tTextLoader.SetTextBuffer(value);\n\t\tsettingsUI.pasteTextBox.value = value;\n\t}\n\n\tfunction setVolume(value: number)\n\t{\n\t\tMasterGain.gain.setTargetAtTime(value, AudioCtx.currentTime, 0.01);\n\t\tvolumeText.value = Math.floor(value * 100).toString();\n\t\tsettingsUI.volume.value = value.toString();\n\t}\n\n\tfunction setWpm(value: number)\n\t{\n\t\tTonePlayer.SetWpm(value);\n\t\tcharWPMText.value = value.toString();\n\t\tsettingsUI.charWPM.value = value.toString();\n\t}\n\n\tfunction setPitch(value: number)\n\t{\n\t\tTonePlayer.SetFrequency(value);\n\t\tpitchText.value = value.toString();\n\t\tsettingsUI.pitch.value = value.toString();\n\t}\n\n\tfunction setCharSpacing(value: number)\n\t{\n\t\tTonePlayer.SetCharSpacing(value);\n\t\tcharSpacingText.value = value.toString();\n\t\tsettingsUI.charSpacing.value = value.toString();\n\t}\n\n\tfunction setVoiceEnabled(value: boolean)\n\t{\n\t\tVoicePlayer.SetEnabled(value);\n\t\tsettingsUI.voiceEnabled.checked = value;\n\t}\n\n\tfunction setLettersEnabled(value: boolean)\n\t{\n\t\tMorse.SetLetters(value);\n\t\tsettingsUI.lettersEnabled.checked = value;\n\t}\n\n\tfunction setNumbersEnabled(value: boolean)\n\t{\n\t\tMorse.SetNumbers(value);\n\t\tsettingsUI.numbersEnabled.checked = value;\n\t}\n\n\tfunction setSymbolsEnabled(value: boolean)\n\t{\n\t\tMorse.SetSymbols(value);\n\t\tsettingsUI.symbolsEnabled.checked = value;\n\t}\n\n\tdocument.addEventListener(\"DOMContentLoaded\", () =>\n\t{\n\t\tFullScreen.Initialize();\n\n\t\tconst volumeStorage = localStorage.getItem(\"volume\");\n\t\tconst volume = volumeStorage == null\n\t\t\t? defaults.volume\n\t\t\t: parseFloat(volumeStorage);\n\t\tsetVolume(volume);\n\n\t\tconst wpmStorage = localStorage.getItem(\"wpm\");\n\t\tconst wpm = wpmStorage == null\n\t\t\t? defaults.wpm\n\t\t\t: parseInt(wpmStorage);\n\t\tsetWpm(wpm);\n\n\t\tconst pitchStorage = localStorage.getItem(\"pitch\");\n\t\tconst pitch = pitchStorage == null\n\t\t\t? defaults.pitch\n\t\t\t: parseInt(pitchStorage);\n\t\tsetPitch(pitch);\n\n\t\tconst charSpacingStorage = localStorage.getItem(\"charSpacing\");\n\t\tconst charSpacing = charSpacingStorage == null\n\t\t\t? defaults.charSpacing\n\t\t\t: parseInt(charSpacingStorage);\n\t\tsetCharSpacing(charSpacing);\n\n\t\tconst voiceEnabledStorage = localStorage.getItem(\"voiceEnabled\");\n\t\tconst voiceEnabled = voiceEnabledStorage == null\n\t\t\t? defaults.voiceEnabled\n\t\t\t: voiceEnabledStorage === \"true\";\n\t\tsetVoiceEnabled(voiceEnabled);\n\n\t\tconst lettersEnabledStorage = localStorage.getItem(\"lettersEnabled\");\n\t\tconst lettersEnabled = lettersEnabledStorage == null\n\t\t\t? defaults.lettersEnabled\n\t\t\t: lettersEnabledStorage === \"true\";\n\t\tsetLettersEnabled(lettersEnabled);\n\n\t\tconst numbersEnabledStorage = localStorage.getItem(\"numbersEnabled\");\n\t\tconst numbersEnabled = numbersEnabledStorage == null\n\t\t\t? defaults.numbersEnabled\n\t\t\t: numbersEnabledStorage === \"true\";\n\t\tsetNumbersEnabled(numbersEnabled);\n\n\t\tconst symbolsEnabledStorage = localStorage.getItem(\"symbolsEnabled\");\n\t\tconst symbolsEnabled = symbolsEnabledStorage == null\n\t\t\t? defaults.symbolsEnabled\n\t\t\t: symbolsEnabledStorage === \"true\";\n\t\tsetSymbolsEnabled(symbolsEnabled);\n\t});\n}\n","namespace Views\n{\n\tfunction view(selector: string, menuItem: Element)\n\t{\n\t\tconst views = QueryAll(\".view\");\n\n\t\tfor (let i = 0; i < views.length; ++i)\n\t\t{\n\t\t\tconst view = views[i];\n\t\t\tif (!view.classList.contains(\"disabled\"))\n\t\t\t\tview.classList.add(\"disabled\");\n\t\t}\n\n\t\tconst viewToShow = Query(selector);\n\t\tviewToShow.classList.remove(\"disabled\");\n\n\t\t// Highlight the menu item\n\t\tconst controls = QueryAll(\".menu .btn\");\n\t\tfor (let i = 0; i < controls.length; ++i)\n\t\t{\n\t\t\tconst control = controls[i];\n\t\t\tcontrol.classList.remove(\"active\");\n\t\t}\n\t\tmenuItem.classList.add(\"active\");\n\t}\n\n\tListen(VIEW_HOME,\n\t\t() => view(\".home\", Query(\".btn-home\")));\n\n\tListen(VIEW_SETTINGS,\n\t\t() => view(\".settings\", Query(\".btn-settings\")));\n\n\tListen(VIEW_PLAYING,\n\t\t() => view(\".playing\", Query(\".btn-playing\")));\n\n\tListen(VIEW_STORIES,\n\t\t() => view(\".stories\", Query(\".btn-stories\")));\n\n\tListen(VIEW_TEXT,\n\t\t() => view(\".paste\", Query(\".btn-paste\")));\n}\n"]}