{"version":3,"sources":["app.js"],"names":["Notify","name","value","document","dispatchEvent","CustomEvent","detail","Listen","handler","addEventListener","evt","Query","selector","element","querySelector","QueryAll","querySelectorAll","QueryId","id","getElementById","AudioCtx","AudioContext","window","MasterGain","createGain","gain","connect","destination","LETTER","NOW_PLAYING","OUTPUT","OSC_OFF","OSC_ON","PATTERN_START","PATTERN_STOP","PAUSE","START","STORY","STOP","SET_SPACING","SET_FLASHING_ENABLED","SET_LETTERS","SET_NUMBERS","SET_PITCH","SET_SYMBOLS","SET_TEXT_BUFFER","SET_VOICE","SET_VOLUME","SET_WPM","UI_SPACING","UI_FLASHING","UI_LETTERS","UI_NUMBERS","UI_PITCH","UI_SYMBOLS","UI_TEXT_BUFFER","UI_VOICE","UI_VOLUME","UI_WPM","VIEW_HOME","VIEW_OPTIONS","VIEW_PLAYING","VIEW_STORIES","VIEW_TEXT","VOICE_DONE","WATCH","FullScreen","exitFullScreen","fullScreenButton","textContent","exitFullscreen","enterFullScreen","fullscreenEnabled","playingView","requestFullscreen","toggleFullScreen","isFullScreen","fullScreenChanged","lastActivity","Date","now","markTime","hideOrReveal","hideControlsMS","hideControls","hideCursor","showControls","showCursor","cursorVisible","style","cursor","controlsVisible","classList","add","controls","menu","sidebar","remove","start","hideControlsInterval","setInterval","stop","clearInterval","removeEventListener","startButton","stopButton","body","parentElement","Morse","RandomCharacter","chars","lettersEnabled","concat","letters","numbersEnabled","numbers","symbolsEnabled","symbols","length","char","Math","floor","random","letterPatterns","numberPatterns","symbolPatterns","GetCharacter","toUpperCase","found","fileName","symbolNames","A","pattern","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9",".","?","!",",",":",";","'","-","/","(",")","@","=","+","\"","Object","keys","Timing","NowPlaying","UnitTime","CharSpacing","TonePlayer","on","oscillatorGain","setTargetAtTime","oscillatorVolume","currentTime","firefoxAntiClickDelay","ramp","off","PlayPattern","pos","i","toneDuration","setTimeout","navigator","userAgent","indexOf","oscillator","createOscillator","setValueAtTime","frequency","Xhr","Load","url","responseType","success","request","XMLHttpRequest","onload","status","response","console","log","onerror","open","send","VoicePlayer","voiceLoaded","play","playWhenDone","PlayVoice","decodeResponse","callback","decodeAudioData","buffer","audioBuffers","loading","loaded","err","loadVoice","PreloadVoice","voiceEnabled","audioSource","createBufferSource","voiceGain","TextLoader","resetPosition","textBufferIndex","textBuffer","updateTextBuffer","text","loadBook","href","Next","startingIndex","morseChar","Player","playNextPattern","nextCharacter_1","sleepTime","substr","currentCharacter","updateVolume","startPlaying","stopPlaying","patternComplete","Routing","processHash","hash","location","routes","history","replaceState","title","pathname","","#playing","#options","#stories","#text","LocalStorage","localStorage","setItem","toString","UI","startBtns","startBtn","pauseBtn","stopBtn","letterElement","outputBuffer","storyLinks","storyLink","preventDefault","anchor","target","disabled","innerHTML","scrollTop","scrollHeight","make","className","el","createElement","patternEl","appendChild","Settings","userSet","flashingEnabled","checked","Adjust","resetSettingsButton","volumeText","charWPMText","pitchText","charSpacingText","volume","charWPM","pitch","charSpacing","pasteTextBox","defaults","wpm","parseFloat","parseInt","getItem","voiceEnabledStorage","flashingEnabledStorage","lettersEnabledStorage","numbersEnabledStorage","symbolsEnabledStorage","Views","view","menuItem","views","view_1","contains","viewToShow","control"],"mappings":"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","file":"app.js","sourcesContent":["var AudioCtx = new (AudioContext || window[\"webkitAudioContext\"])();\nvar MasterGain = AudioCtx.createGain();\nMasterGain.gain.value = 0.5;\nMasterGain.connect(AudioCtx.destination);\nfunction Notify(name, value) {\n    document.dispatchEvent(new CustomEvent(name, { detail: value }));\n}\nfunction Listen(name, handler) {\n    document.addEventListener(name, function (evt) { return handler(evt.detail); });\n}\nvar LETTER = \"letter\";\nvar NOW_PLAYING = \"nowPlaying\";\nvar OUTPUT = \"output\";\nvar OSC_OFF = \"toneOff\";\nvar OSC_ON = \"toneOn\";\nvar PATTERN_START = \"patternStart\";\nvar PATTERN_STOP = \"patternStop\";\nvar PAUSE = \"pause\";\nvar START = \"start\";\nvar STORY = \"book\";\nvar STOP = \"stop\";\nvar SET_SPACING = \"set_spacing\";\nvar SET_FLASHING_ENABLED = \"set_flashing\";\nvar SET_LETTERS = \"set_letters\";\nvar SET_NUMBERS = \"set_numbers\";\nvar SET_PITCH = \"set_pitch\";\nvar SET_SYMBOLS = \"set_symbols\";\nvar SET_TEXT_BUFFER = \"set_textBuffer\";\nvar SET_VOICE = \"set_voice\";\nvar SET_VOLUME = \"set_volume\";\nvar SET_WPM = \"set_wpm\";\nvar UI_SPACING = \"ui_spacing\";\nvar UI_FLASHING = \"ui_flashing\";\nvar UI_LETTERS = \"ui_letters\";\nvar UI_NUMBERS = \"ui_numbers\";\nvar UI_PITCH = \"ui_pitch\";\nvar UI_SYMBOLS = \"ui_symbols\";\nvar UI_TEXT_BUFFER = \"ui_textBuffer\";\nvar UI_VOICE = \"ui_voice\";\nvar UI_VOLUME = \"ui_volume\";\nvar UI_WPM = \"ui_wpm\";\nvar VIEW_HOME = \"view_home\";\nvar VIEW_OPTIONS = \"view_options\";\nvar VIEW_PLAYING = \"view_player\";\nvar VIEW_STORIES = \"view_stories\";\nvar VIEW_TEXT = \"view_text\";\nvar VOICE_DONE = \"voiceDone\";\nvar WATCH = \"watch\";\nfunction Query(selector, element) {\n    return (element || document).querySelector(selector);\n}\nfunction QueryAll(selector, element) {\n    return (element || document).querySelectorAll(selector);\n}\nfunction QueryId(id) {\n    return document.getElementById(id);\n}\n/// <reference path=\"query.ts\"/>\nvar FullScreen;\n(function (FullScreen) {\n    var fullScreenButton = Query(\".btn-fullscreen\");\n    var startButton = Query(\".btn-start\");\n    var stopButton = Query(\".btn-stop\");\n    var playingView = document.body.parentElement;\n    var controls = Query(\".controls\");\n    var menu = Query(\".menu\");\n    var sidebar = Query(\".sidebar\");\n    var isFullScreen = false;\n    var hideControlsInterval;\n    var lastActivity = Date.now();\n    var hideControlsMS = 2000;\n    var controlsVisible = false;\n    var cursorVisible = false;\n    function exitFullScreen() {\n        fullScreenButton.textContent = \"Full screen\";\n        if (document.exitFullscreen)\n            document.exitFullscreen();\n        else if (document[\"webkitExitFullscreen\"])\n            document[\"webkitExitFullscreen\"]();\n        else if (document[\"mozCancelFullScreen\"])\n            document[\"mozCancelFullScreen\"]();\n    }\n    function enterFullScreen() {\n        fullScreenButton.textContent = \"Exit full screen\";\n        if (document.fullscreenEnabled)\n            playingView.requestFullscreen();\n        else if (document[\"webkitFullscreenEnabled\"])\n            playingView[\"webkitRequestFullscreen\"]();\n        else if (document[\"mozFullScreenEnabled\"])\n            playingView[\"mozRequestFullScreen\"]();\n    }\n    function toggleFullScreen() {\n        if (isFullScreen)\n            exitFullScreen();\n        else\n            enterFullScreen();\n    }\n    function fullScreenChanged() {\n        isFullScreen = !isFullScreen;\n        lastActivity = Date.now();\n    }\n    function markTime() {\n        lastActivity = Date.now();\n    }\n    function hideOrReveal() {\n        if (isFullScreen && Date.now() - lastActivity > hideControlsMS) {\n            hideControls();\n            hideCursor();\n            return;\n        }\n        else {\n            showControls();\n            showCursor();\n        }\n    }\n    function hideCursor() {\n        if (cursorVisible)\n            playingView.style.cursor = \"none\";\n        cursorVisible = false;\n    }\n    function showCursor() {\n        if (!cursorVisible)\n            playingView.style.cursor = \"default\";\n        cursorVisible = true;\n    }\n    function hideControls() {\n        if (controlsVisible) {\n            fullScreenButton.classList.add(\"disabled\");\n            controls.classList.add(\"disabled\");\n            menu.classList.add(\"disabled\");\n            sidebar.classList.add(\"disabled\");\n        }\n        controlsVisible = false;\n    }\n    function showControls() {\n        if (!controlsVisible) {\n            fullScreenButton.classList.remove(\"disabled\");\n            controls.classList.remove(\"disabled\");\n            menu.classList.remove(\"disabled\");\n            sidebar.classList.remove(\"disabled\");\n        }\n        controlsVisible = true;\n    }\n    function start() {\n        document.addEventListener(\"mousemove\", markTime);\n        hideControlsInterval = setInterval(hideOrReveal, 200);\n    }\n    function stop() {\n        clearInterval(hideControlsInterval);\n        document.removeEventListener(\"mousemove\", markTime);\n        showCursor();\n        showControls();\n        if (isFullScreen)\n            exitFullScreen();\n    }\n    startButton.addEventListener(\"click\", start);\n    stopButton.addEventListener(\"click\", stop);\n    if (document.fullscreenEnabled)\n        document.addEventListener(\"fullscreenchange\", fullScreenChanged);\n    else if (document[\"webkitFullscreenEnabled\"])\n        document.addEventListener(\"webkitfullscreenchange\", fullScreenChanged);\n    else if (document[\"mozFullScreenEnabled\"])\n        document.addEventListener(\"mozfullscreenchange\", fullScreenChanged);\n    fullScreenButton.addEventListener(\"click\", toggleFullScreen);\n})(FullScreen || (FullScreen = {}));\n/// <reference path=\"events.ts\"/>\nvar Morse;\n(function (Morse) {\n    var letterPatterns = {\n        \"A\": { name: \"A\", pattern: \".-\" },\n        \"B\": { name: \"B\", pattern: \"-...\" },\n        \"C\": { name: \"C\", pattern: \"-.-.\" },\n        \"D\": { name: \"D\", pattern: \"-..\" },\n        \"E\": { name: \"E\", pattern: \".\" },\n        \"F\": { name: \"F\", pattern: \"..-.\" },\n        \"G\": { name: \"G\", pattern: \"--.\" },\n        \"H\": { name: \"H\", pattern: \"....\" },\n        \"I\": { name: \"I\", pattern: \"..\" },\n        \"J\": { name: \"J\", pattern: \".---\" },\n        \"K\": { name: \"K\", pattern: \"-.-\" },\n        \"L\": { name: \"L\", pattern: \".-..\" },\n        \"M\": { name: \"M\", pattern: \"--\" },\n        \"N\": { name: \"N\", pattern: \"-.\" },\n        \"O\": { name: \"O\", pattern: \"---\" },\n        \"P\": { name: \"P\", pattern: \".--.\" },\n        \"Q\": { name: \"Q\", pattern: \"--.-\" },\n        \"R\": { name: \"R\", pattern: \".-.\" },\n        \"S\": { name: \"S\", pattern: \"...\" },\n        \"T\": { name: \"T\", pattern: \"-\" },\n        \"U\": { name: \"U\", pattern: \"..-\" },\n        \"V\": { name: \"V\", pattern: \"...-\" },\n        \"W\": { name: \"W\", pattern: \".--\" },\n        \"X\": { name: \"X\", pattern: \"-..-\" },\n        \"Y\": { name: \"Y\", pattern: \"-.--\" },\n        \"Z\": { name: \"Z\", pattern: \"--..\" }\n    };\n    var numberPatterns = {\n        \"0\": { name: \"0\", pattern: \"-----\" },\n        \"1\": { name: \"1\", pattern: \".----\" },\n        \"2\": { name: \"2\", pattern: \"..---\" },\n        \"3\": { name: \"3\", pattern: \"...--\" },\n        \"4\": { name: \"4\", pattern: \"....-\" },\n        \"5\": { name: \"5\", pattern: \".....\" },\n        \"6\": { name: \"6\", pattern: \"-....\" },\n        \"7\": { name: \"7\", pattern: \"--...\" },\n        \"8\": { name: \"8\", pattern: \"---..\" },\n        \"9\": { name: \"9\", pattern: \"----.\" }\n    };\n    var symbolPatterns = {\n        \".\": { name: \".\", pattern: \".-.-.-\" },\n        \"?\": { name: \"?\", pattern: \"..--..\" },\n        \"!\": { name: \"!\", pattern: \"-.-.--\" },\n        \",\": { name: \",\", pattern: \"--..--\" },\n        \":\": { name: \":\", pattern: \"---...\" },\n        \";\": { name: \";\", pattern: \"-.-.-.\" },\n        \"'\": { name: \"'\", pattern: \".----.\" },\n        \"-\": { name: \"-\", pattern: \"-....-\" },\n        \"/\": { name: \"/\", pattern: \"-..-.\" },\n        \"(\": { name: \"(\", pattern: \"-.--.\" },\n        \")\": { name: \")\", pattern: \"-.--.-\" },\n        \"@\": { name: \"@\", pattern: \".--.-.\" },\n        \"=\": { name: \"=\", pattern: \"-...-\" },\n        \"+\": { name: \"+\", pattern: \".-.-.\" },\n        \"\\\"\": { name: \"\\\"\", pattern: \".-..-.\" }\n    };\n    var symbolNames = {\n        \".\": \"PERIOD\",\n        \"?\": \"QUESTION\",\n        \"!\": \"EXCLAMATION\",\n        \",\": \"COMMA\",\n        \":\": \"COLON\",\n        \";\": \"SEMICOLON\",\n        \"'\": \"APOSTROPHE\",\n        \"-\": \"DASH\",\n        \"/\": \"SLASH\",\n        \"(\": \"OPEN_BRACKET\",\n        \")\": \"CLOSE_BRACKET\",\n        \"@\": \"AT\",\n        \"=\": \"EQUALS\",\n        \"+\": \"PLUS\",\n        \"\\\"\": \"QUOTE\"\n    };\n    var letters = Object.keys(letterPatterns);\n    var numbers = Object.keys(numberPatterns);\n    var symbols = Object.keys(symbolPatterns);\n    var lettersEnabled = true;\n    var numbersEnabled = false;\n    var symbolsEnabled = false;\n    function RandomCharacter() {\n        var chars = [];\n        if (lettersEnabled)\n            chars = chars.concat(letters);\n        if (numbersEnabled)\n            chars = chars.concat(numbers);\n        if (symbolsEnabled)\n            chars = chars.concat(symbols);\n        if (chars.length > 0) {\n            var char = chars[Math.floor(Math.random() * chars.length)];\n            return letterPatterns[char] || numberPatterns[char] || symbolPatterns[char];\n        }\n        return null;\n    }\n    Morse.RandomCharacter = RandomCharacter;\n    function GetCharacter(char) {\n        char = char.toUpperCase();\n        var found = letterPatterns[char];\n        if (found)\n            return found;\n        found = numberPatterns[char];\n        if (found)\n            return found;\n        found = symbolPatterns[char];\n        if (found)\n            return found;\n        return undefined;\n    }\n    Morse.GetCharacter = GetCharacter;\n    function fileName(char) {\n        var fileName = symbolNames[char.name];\n        if (!fileName)\n            fileName = char.name;\n        fileName += \".mp3\";\n        return fileName;\n    }\n    Morse.fileName = fileName;\n    Listen(SET_LETTERS, function (value) { return lettersEnabled = value; });\n    Listen(SET_NUMBERS, function (value) { return numbersEnabled = value; });\n    Listen(SET_SYMBOLS, function (value) { return symbolsEnabled = value; });\n})(Morse || (Morse = {}));\n/// <reference path=\"events.ts\"/>\nvar Timing;\n(function (Timing) {\n    Listen(NOW_PLAYING, function (value) { return Timing.NowPlaying = value; });\n    Listen(SET_WPM, function (value) { return Timing.UnitTime = 1.2 / value * 1000; });\n    Listen(SET_SPACING, function (value) { return Timing.CharSpacing = value; });\n})(Timing || (Timing = {}));\n/// <reference path=\"events.ts\"/>\n/// <reference path=\"audiocontext.ts\"/>\n/// <reference path=\"morsetable.ts\"/>\n/// <reference path=\"timing.ts\"/>\nvar TonePlayer;\n(function (TonePlayer) {\n    var T = Timing;\n    var firefoxAntiClickDelay = navigator.userAgent.indexOf(\"irefox\") !== -1 ? 0.05 : 0;\n    var oscillatorVolume = 0.9;\n    var ramp = 0.004;\n    // Wire up audio parts.\n    // Oscillator frequency will be initialized by UI.\n    var oscillator = AudioCtx.createOscillator();\n    var oscillatorGain = AudioCtx.createGain();\n    oscillatorGain.gain.setValueAtTime(0, AudioCtx.currentTime);\n    oscillator.connect(oscillatorGain);\n    oscillatorGain.connect(MasterGain);\n    oscillator.start(0);\n    function on() {\n        oscillatorGain.gain.setTargetAtTime(oscillatorVolume, AudioCtx.currentTime + firefoxAntiClickDelay, ramp);\n        Notify(OSC_ON, null);\n    }\n    function off() {\n        oscillatorGain.gain.setTargetAtTime(0, AudioCtx.currentTime + firefoxAntiClickDelay, ramp);\n        Notify(OSC_OFF, null);\n    }\n    function PlayPattern(char) {\n        Notify(PATTERN_START, char.pattern);\n        Notify(LETTER, \"\");\n        var pos = 0;\n        for (var i = 0; i < char.pattern.length; ++i) {\n            var toneDuration = char.pattern[i] === \".\" ? 1 : 3;\n            setTimeout(on, pos);\n            pos += T.UnitTime * toneDuration;\n            setTimeout(off, pos);\n            pos += T.UnitTime;\n        }\n        setTimeout(function () { return Notify(PATTERN_STOP, char); }, pos - T.UnitTime);\n    }\n    TonePlayer.PlayPattern = PlayPattern;\n    Listen(SET_PITCH, function (value) { return oscillator.frequency.value = value; });\n})(TonePlayer || (TonePlayer = {}));\nvar Xhr;\n(function (Xhr) {\n    function Load(url, responseType, success) {\n        var request = new XMLHttpRequest();\n        request.responseType = responseType;\n        request.onload = function () {\n            if (request.status === 200)\n                success(request.response);\n            else\n                console.log(\"Sever request failed: \", request);\n        };\n        request.onerror = function () { console.log(\"Server request failed: \", request); };\n        request.open(\"GET\", url);\n        request.send();\n    }\n    Xhr.Load = Load;\n})(Xhr || (Xhr = {}));\n/// <reference path=\"morsetable.ts\"/>\n/// <reference path=\"events.ts\"/>\n/// <reference path=\"audiocontext.ts\"/>\n/// <reference path=\"timing.ts\"/>\n/// <reference path=\"xhr.ts\"/>\nvar VoicePlayer;\n(function (VoicePlayer) {\n    // For caching audio files as they're loaded\n    var audioBuffers = {};\n    // Wire up audio\n    var voiceGain = AudioCtx.createGain();\n    voiceGain.gain.value = 0.85;\n    voiceGain.connect(MasterGain);\n    var voiceEnabled = false;\n    var loading = {};\n    var loaded = {};\n    var playWhenDone = false;\n    function voiceLoaded(char) {\n        var play = playWhenDone;\n        playWhenDone = false;\n        if (play)\n            PlayVoice(char);\n    }\n    function decodeResponse(char, callback) {\n        return function (response) {\n            AudioCtx.decodeAudioData(response, function (buffer) {\n                audioBuffers[char.name] = buffer;\n                loading[char.name] = false;\n                loaded[char.name] = true;\n                callback(char);\n            }, function (err) { return console.log(\"Error loading audio source: \", err); });\n        };\n    }\n    function loadVoice(char) {\n        if (loaded[char.name])\n            voiceLoaded(char);\n        else {\n            loading[char.name] = true;\n            Xhr.Load(\"/snd/\" + Morse.fileName(char), \"arraybuffer\", decodeResponse(char, voiceLoaded));\n        }\n    }\n    function PreloadVoice(char) {\n        if (voiceEnabled && !loaded[char.name] && loading[char.name])\n            loadVoice(char);\n    }\n    VoicePlayer.PreloadVoice = PreloadVoice;\n    function PlayVoice(char) {\n        if (!Timing.NowPlaying)\n            return;\n        if (!voiceEnabled)\n            Notify(VOICE_DONE, char);\n        else if (loading[char.name])\n            playWhenDone = true;\n        else if (!loaded[char.name]) {\n            playWhenDone = true;\n            loadVoice(char);\n        }\n        else {\n            var buffer = audioBuffers[char.name];\n            var audioSource = AudioCtx.createBufferSource();\n            audioSource.addEventListener(\"ended\", function () { return Notify(VOICE_DONE, char); });\n            audioSource.buffer = buffer;\n            audioSource.connect(voiceGain);\n            audioSource.start(0);\n        }\n    }\n    VoicePlayer.PlayVoice = PlayVoice;\n    Listen(SET_VOICE, function (value) { return voiceEnabled = value; });\n})(VoicePlayer || (VoicePlayer = {}));\n/// <reference path=\"events.ts\"/>\n/// <reference path=\"morsetable.ts\"/>\n/// <reference path=\"xhr.ts\"/>\nvar TextLoader;\n(function (TextLoader) {\n    var textBuffer = \"\";\n    var textBufferIndex = -1;\n    function resetPosition() {\n        textBufferIndex = textBuffer.length > 0 ? 0 : -1;\n    }\n    function updateTextBuffer(text) {\n        textBuffer = text.toUpperCase() + \"\\n\";\n        resetPosition();\n    }\n    function loadBook(href) {\n        var response = Xhr.Load(href, \"text\", function (response) {\n            Notify(SET_TEXT_BUFFER, response);\n            Notify(START, null);\n        });\n    }\n    function Next() {\n        if (textBuffer.length > 0) {\n            var startingIndex = textBufferIndex;\n            var text = \"\";\n            do {\n                text += textBuffer[textBufferIndex];\n                var morseChar = Morse.GetCharacter(textBuffer[textBufferIndex]);\n                // Increment and wrap around if necessary\n                ++textBufferIndex;\n                if (textBufferIndex === textBuffer.length)\n                    textBufferIndex = 0;\n                if (morseChar)\n                    return [text, morseChar];\n            } while (textBufferIndex !== startingIndex);\n            return [\"\", null];\n        }\n        var char = Morse.RandomCharacter();\n        return [char.name, char];\n    }\n    TextLoader.Next = Next;\n    Listen(SET_TEXT_BUFFER, updateTextBuffer);\n    Listen(STORY, loadBook);\n    Listen(STOP, resetPosition);\n})(TextLoader || (TextLoader = {}));\n/// <reference path=\"events.ts\"/>\n/// <reference path=\"audiocontext.ts\"/>\n/// <reference path=\"morsetable.ts\"/>\n/// <reference path=\"toneplayer.ts\"/>\n/// <reference path=\"voiceplayer.ts\"/>\n/// <reference path=\"text.ts\"/>\n/// <reference path=\"timing.ts\"/>\nvar Player;\n(function (Player) {\n    var T = Timing;\n    function playNextPattern() {\n        if (T.NowPlaying) {\n            // Fetch a tuple containing the next character and any unplayable text before it (whitespace, etc).\n            var nextCharacter_1 = TextLoader.Next();\n            if (nextCharacter_1[1]) {\n                var sleepTime = 0;\n                // If there is unplayable text, send it to the output buffer and delay for one word-break.\n                if (nextCharacter_1[0] !== nextCharacter_1[1].name) {\n                    Notify(OUTPUT, nextCharacter_1[0].substr(0, nextCharacter_1[0].length - 1));\n                    Notify(PATTERN_START, \" \");\n                    Notify(LETTER, \"\");\n                    // A 7/3 factor comes from character spaces being 3 units and word spaces being 7 units.\n                    sleepTime = T.UnitTime * T.CharSpacing * (7 / 3);\n                }\n                setTimeout(function () {\n                    var currentCharacter = nextCharacter_1[1];\n                    VoicePlayer.PreloadVoice(currentCharacter);\n                    TonePlayer.PlayPattern(currentCharacter);\n                }, sleepTime);\n            }\n            else {\n                Notify(PATTERN_START, \"\");\n                Notify(PATTERN_STOP, null);\n            }\n        }\n    }\n    function updateVolume(value) {\n        MasterGain.gain.setTargetAtTime(value, AudioCtx.currentTime, 0.01);\n    }\n    function startPlaying() {\n        if (!T.NowPlaying) {\n            Notify(NOW_PLAYING, true);\n            setTimeout(playNextPattern, 500);\n        }\n    }\n    function stopPlaying() {\n        Notify(NOW_PLAYING, false);\n    }\n    function patternComplete(char) {\n        if (T.NowPlaying) {\n            if (char == null) {\n                setTimeout(playNextPattern, T.UnitTime * T.CharSpacing);\n            }\n            else {\n                Notify(LETTER, char.name);\n                // playNextPattern() will be called by VOICE_DONE (which is\n                // triggered whether the voice is currently enabled or not).\n                setTimeout(function () { return VoicePlayer.PlayVoice(char); }, T.UnitTime * T.CharSpacing);\n            }\n        }\n    }\n    Listen(VOICE_DONE, playNextPattern);\n    Listen(PAUSE, stopPlaying);\n    Listen(STOP, stopPlaying);\n    Listen(START, startPlaying);\n    Listen(PATTERN_STOP, patternComplete);\n    Listen(SET_VOLUME, updateVolume);\n})(Player || (Player = {}));\n/// <reference path=\"events.ts\"/>\nvar Routing;\n(function (Routing) {\n    var routes = {\n        \"\": VIEW_HOME,\n        \"#playing\": VIEW_PLAYING,\n        \"#options\": VIEW_OPTIONS,\n        \"#stories\": VIEW_STORIES,\n        \"#text\": VIEW_TEXT\n    };\n    function processHash() {\n        var hash = location.hash;\n        if (routes[hash])\n            Notify(routes[hash], null);\n        if (hash === \"\" && location.href.indexOf(\"#\") > -1)\n            history.replaceState(\"\", document.title, window.location.pathname);\n    }\n    window.addEventListener(\"hashchange\", processHash);\n    document.addEventListener(\"DOMContentLoaded\", processHash);\n})(Routing || (Routing = {}));\n/// <reference path=\"events.ts\"/>\nvar LocalStorage;\n(function (LocalStorage) {\n    Listen(UI_SPACING, function (value) { return localStorage.setItem(\"charSpacing\", value); });\n    Listen(UI_FLASHING, function (value) { return localStorage.setItem(\"flashingEnabled\", value.toString()); });\n    Listen(UI_LETTERS, function (value) { return localStorage.setItem(\"lettersEnabled\", value.toString()); });\n    Listen(UI_NUMBERS, function (value) { return localStorage.setItem(\"numbersEnabled\", value.toString()); });\n    Listen(UI_PITCH, function (value) { return localStorage.setItem(\"pitch\", value); });\n    Listen(UI_SYMBOLS, function (value) { return localStorage.setItem(\"symbolsEnabled\", value.toString()); });\n    Listen(UI_TEXT_BUFFER, function (value) { return localStorage.setItem(\"textBuffer\", value.toString()); });\n    Listen(UI_VOICE, function (value) { return localStorage.setItem(\"voiceEnabled\", value.toString()); });\n    Listen(UI_VOLUME, function (value) { return localStorage.setItem(\"volume\", value); });\n    Listen(UI_WPM, function (value) { return localStorage.setItem(\"wpm\", value); });\n})(LocalStorage || (LocalStorage = {}));\n/// <reference path=\"../events.ts\"/>\n/// <reference path=\"../morsetable.ts\"/>\n/// <reference path=\"../query.ts\"/>\nvar UI;\n(function (UI) {\n    var homeBtn = Query(\".btn-home\");\n    var startBtns = QueryAll(\".btn-start\");\n    var startBtn = Query(\".btn-start\");\n    var pauseBtn = Query(\".btn-pause\");\n    var stopBtn = Query(\".btn-stop\");\n    var letterElement = Query(\".letter\");\n    var outputBuffer = Query(\".outputBuffer\");\n    var storyLinks = QueryAll(\".story a\");\n    pauseBtn.addEventListener(\"click\", function () { return Notify(PAUSE, null); });\n    for (var i = 0; i < startBtns.length; ++i) {\n        startBtns[i].addEventListener(\"click\", function () { return Notify(START, null); });\n    }\n    stopBtn.addEventListener(\"click\", function () { return Notify(STOP, null); });\n    for (var i = 0; i < storyLinks.length; ++i) {\n        var storyLink = storyLinks[i];\n        storyLink.addEventListener(\"click\", function (evt) {\n            evt.preventDefault();\n            var anchor = evt.target;\n            var href = anchor.href;\n            Notify(STORY, href);\n        });\n    }\n    Listen(PAUSE, function () {\n        startBtn.disabled = false;\n        pauseBtn.disabled = true;\n        stopBtn.disabled = true;\n    });\n    Listen(START, function () {\n        Notify(WATCH, null);\n        startBtn.disabled = true;\n        pauseBtn.disabled = false;\n        stopBtn.disabled = false;\n    });\n    Listen(STOP, function () {\n        location.hash = \"\";\n        outputBuffer.innerHTML = \"\";\n        letterElement.innerHTML = \"\";\n        startBtn.disabled = false;\n        pauseBtn.disabled = true;\n        stopBtn.disabled = true;\n    });\n    ///\n    Listen(LETTER, function (value) { return letterElement.innerHTML = value; });\n    Listen(OUTPUT, function (value) {\n        outputBuffer.innerHTML += value;\n        outputBuffer.scrollTop = outputBuffer.scrollHeight;\n    });\n    Listen(PATTERN_START, function (pattern) {\n        function make(className) {\n            var el = document.createElement(\"span\");\n            el.classList.add(\"element\");\n            el.classList.add(className);\n            return el;\n        }\n        var patternEl = document.querySelector(\".view.playing .pattern\");\n        for (var i = 0; i < pattern.length; ++i) {\n            var el = void 0;\n            if (pattern[i] === \".\")\n                el = make(\"dit\");\n            else if (pattern[i] === \"-\")\n                el = make(\"dah\");\n            else if (pattern[i] === \" \")\n                el = make(\"wordSpace\");\n            patternEl.appendChild(el);\n        }\n        patternEl.appendChild(make(\"charSpace\"));\n    });\n    Listen(PATTERN_STOP, function (char) {\n        outputBuffer.innerHTML += char == null ? \" \" : char.name;\n        outputBuffer.scrollTop = outputBuffer.scrollHeight;\n    });\n    Listen(OSC_OFF, function () { return Query(\"body\").classList.remove(\"toneOn\"); });\n    Listen(OSC_ON, function () {\n        if (Settings.userSet.flashingEnabled.checked)\n            Query(\"body\").classList.add(\"toneOn\");\n    });\n    Listen(WATCH, function () { return location.hash = \"#playing\"; });\n})(UI || (UI = {}));\n/// <reference path=\"../events.ts\"/>\nvar Settings;\n(function (Settings) {\n    var resetSettingsButton = QueryId(\"resetSettings\");\n    // Settings text labels\n    var volumeText = Query(\".volumeText\");\n    var charWPMText = Query(\".charWPMText\");\n    var pitchText = Query(\".pitchText\");\n    var charSpacingText = Query(\".charSpacingText\");\n    // Settings inputs\n    Settings.userSet = {\n        volume: QueryId(\"volume\"),\n        charWPM: QueryId(\"charWPM\"),\n        pitch: QueryId(\"pitch\"),\n        charSpacing: QueryId(\"charSpacing\"),\n        voiceEnabled: QueryId(\"voiceEnabled\"),\n        pasteTextBox: QueryId(\"pasteText\"),\n        flashingEnabled: QueryId(\"flashingEnabled\"),\n        lettersEnabled: QueryId(\"lettersEnabled\"),\n        numbersEnabled: QueryId(\"numbersEnabled\"),\n        symbolsEnabled: QueryId(\"symbolsEnabled\")\n    };\n    var defaults = {\n        charSpacing: 12,\n        flashingEnabled: false,\n        lettersEnabled: true,\n        numbersEnabled: false,\n        pitch: 650,\n        symbolsEnabled: false,\n        voiceEnabled: true,\n        volume: 0.40,\n        wpm: 15\n    };\n    function Adjust(name, value) {\n        Notify(\"manual_\" + name, value.toString());\n        Notify(name, value);\n    }\n    Settings.userSet.volume.addEventListener(\"input\", function () { return Adjust(SET_VOLUME, parseFloat(Settings.userSet.volume.value)); });\n    Settings.userSet.charWPM.addEventListener(\"input\", function () { return Adjust(SET_WPM, parseInt(Settings.userSet.charWPM.value)); });\n    Settings.userSet.charSpacing.addEventListener(\"input\", function () { return Adjust(SET_SPACING, parseInt(Settings.userSet.charSpacing.value)); });\n    Settings.userSet.pitch.addEventListener(\"input\", function () { return Adjust(SET_PITCH, parseInt(Settings.userSet.pitch.value)); });\n    Settings.userSet.pasteTextBox.addEventListener(\"input\", function () { return Adjust(SET_TEXT_BUFFER, Settings.userSet.pasteTextBox.value); });\n    Settings.userSet.voiceEnabled.addEventListener(\"change\", function () { return Adjust(SET_VOICE, Settings.userSet.voiceEnabled.checked); });\n    Settings.userSet.flashingEnabled.addEventListener(\"change\", function () { return Adjust(SET_FLASHING_ENABLED, Settings.userSet.flashingEnabled.checked); });\n    Settings.userSet.lettersEnabled.addEventListener(\"change\", function () { return Adjust(SET_LETTERS, Settings.userSet.lettersEnabled.checked); });\n    Settings.userSet.numbersEnabled.addEventListener(\"change\", function () { return Adjust(SET_NUMBERS, Settings.userSet.numbersEnabled.checked); });\n    Settings.userSet.symbolsEnabled.addEventListener(\"change\", function () { return Adjust(SET_SYMBOLS, Settings.userSet.symbolsEnabled.checked); });\n    resetSettingsButton.addEventListener(\"click\", function () {\n        Adjust(SET_SPACING, defaults.charSpacing);\n        Adjust(SET_FLASHING_ENABLED, defaults.flashingEnabled);\n        Adjust(SET_LETTERS, defaults.lettersEnabled);\n        Adjust(SET_NUMBERS, defaults.numbersEnabled);\n        Adjust(SET_PITCH, defaults.pitch);\n        Adjust(SET_SYMBOLS, defaults.symbolsEnabled);\n        Adjust(SET_VOICE, defaults.voiceEnabled);\n        Adjust(SET_VOLUME, defaults.volume);\n        Adjust(SET_WPM, defaults.wpm);\n    });\n    // Update UI in response to settings changes\n    Listen(SET_SPACING, function (value) {\n        charSpacingText.value = value.toString();\n        Settings.userSet.charSpacing.value = value.toString();\n    });\n    Listen(SET_FLASHING_ENABLED, function (value) { return Settings.userSet.flashingEnabled.checked = value; });\n    Listen(SET_LETTERS, function (value) { return Settings.userSet.lettersEnabled.checked = value; });\n    Listen(SET_NUMBERS, function (value) { return Settings.userSet.numbersEnabled.checked = value; });\n    Listen(SET_PITCH, function (value) {\n        pitchText.value = value.toString();\n        Settings.userSet.pitch.value = value.toString();\n    });\n    Listen(SET_SYMBOLS, function (value) { return Settings.userSet.symbolsEnabled.checked = value; });\n    Listen(SET_TEXT_BUFFER, function (value) { return Settings.userSet.pasteTextBox.value = value; });\n    Listen(SET_VOICE, function (value) { return Settings.userSet.voiceEnabled.checked = value; });\n    Listen(SET_VOLUME, function (value) {\n        volumeText.value = Math.floor(value * 100).toString();\n        Settings.userSet.volume.value = value.toString();\n    });\n    Listen(SET_WPM, function (value) {\n        charWPMText.value = value.toString();\n        Settings.userSet.charWPM.value = value.toString();\n    });\n    document.addEventListener(\"DOMContentLoaded\", function () {\n        // // Trigger events to initialize state\n        Notify(SET_VOLUME, localStorage.getItem(\"volume\") || defaults.volume);\n        Notify(SET_WPM, localStorage.getItem(\"wpm\") || defaults.wpm);\n        Notify(SET_SPACING, localStorage.getItem(\"charSpacing\") || defaults.charSpacing);\n        Notify(SET_PITCH, localStorage.getItem(\"pitch\") || defaults.pitch);\n        var voiceEnabledStorage = localStorage.getItem(\"voiceEnabled\");\n        if (voiceEnabledStorage == null)\n            Notify(SET_VOICE, defaults.voiceEnabled);\n        else\n            Notify(SET_VOICE, voiceEnabledStorage === \"true\");\n        var flashingEnabledStorage = localStorage.getItem(\"flashingEnabled\");\n        if (flashingEnabledStorage == null)\n            Notify(SET_FLASHING_ENABLED, defaults.flashingEnabled);\n        else\n            Notify(SET_FLASHING_ENABLED, flashingEnabledStorage === \"true\");\n        var lettersEnabledStorage = localStorage.getItem(\"lettersEnabled\");\n        if (lettersEnabledStorage == null)\n            Notify(SET_LETTERS, defaults.lettersEnabled);\n        else\n            Notify(SET_LETTERS, lettersEnabledStorage === \"true\");\n        var numbersEnabledStorage = localStorage.getItem(\"numbersEnabled\");\n        if (numbersEnabledStorage == null)\n            Notify(SET_NUMBERS, defaults.numbersEnabled);\n        else\n            Notify(SET_NUMBERS, numbersEnabledStorage === \"true\");\n        var symbolsEnabledStorage = localStorage.getItem(\"symbolsEnabled\");\n        if (symbolsEnabledStorage == null)\n            Notify(SET_SYMBOLS, defaults.symbolsEnabled);\n        else\n            Notify(SET_SYMBOLS, symbolsEnabledStorage === \"true\");\n    });\n})(Settings || (Settings = {}));\n/// <reference path=\"../events.ts\"/>\n/// <reference path=\"../query.ts\"/>\nvar Views;\n(function (Views) {\n    function view(selector, menuItem) {\n        var views = QueryAll(\".view\");\n        for (var i = 0; i < views.length; ++i) {\n            var view_1 = views[i];\n            if (!view_1.classList.contains(\"disabled\"))\n                view_1.classList.add(\"disabled\");\n        }\n        var viewToShow = Query(selector);\n        viewToShow.classList.remove(\"disabled\");\n        // Highlight the menu item\n        var controls = QueryAll(\".menu .btn\");\n        for (var i = 0; i < controls.length; ++i) {\n            var control = controls[i];\n            control.classList.remove(\"active\");\n        }\n        menuItem.classList.add(\"active\");\n    }\n    Listen(VIEW_HOME, function () { return view(\".home\", Query(\".btn-home\")); });\n    Listen(VIEW_OPTIONS, function () { return view(\".options\", Query(\".btn-options\")); });\n    Listen(VIEW_PLAYING, function () { return view(\".playing\", Query(\".btn-playing\")); });\n    Listen(VIEW_STORIES, function () { return view(\".stories\", Query(\".btn-stories\")); });\n    Listen(VIEW_TEXT, function () { return view(\".paste\", Query(\".btn-paste\")); });\n})(Views || (Views = {}));\n\n//# sourceMappingURL=app.js.map\n"]}